<html><head><title>Module Lwt_seq </title><meta charset="utf8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link rel="stylesheet" href="https://ocsigen.org/css/style.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/themes/prism.min.css"/><script type="text/javascript" src="https://ocsigen.org/js/client.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-core.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-ocaml.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-clike.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-reason.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-javascript.min.js">
//<![CDATA[

//]]>
</script></head><body class="Lwt_seq lwt"><div class="project-page"><div class="page-header"><p class="logo-ocsigen"><a href=".././../../" class="ocsimore_phrasing_link"><img src=".././../../img/ocsigen-white.svg" alt="Ocsigen"/></a>
</p><p class="logo-subproject">Lwt</p><div class="mainmenu"><p class="mainmenu-home"><a href=".././../../" class="ocsimore_phrasing_link">Home</a></p><p class="mainmenu-doc"><a href=".././../../tuto/" class="ocsimore_phrasing_link">Doc</a></p><p><a href=".././../../eliom/" class="ocsimore_phrasing_link">Eliom</a></p><p><a href=".././../../js_of_ocaml/" class="ocsimore_phrasing_link">Js_of_ocaml</a></p><p class="mainmenu-current"><a href=".././../../lwt/" class="ocsimore_phrasing_link">Lwt</a></p><p><a href=".././../../tyxml/" class="ocsimore_phrasing_link">Tyxml</a></p><p><a href=".././../../ocsigen-start/" class="ocsimore_phrasing_link">Start</a></p></div><form id="googlesearch" action="https://google.com/search"><input name="q" id="gsearch-box" placeholder="Search using Google"/><label for="gsearch-box"><img src="/img/search.svg" alt="" id="gsearch-icon"/></label><input type="submit" id="gsearch-submit" onclick="document.getElementById('gsearch-box').value += ' site:ocsigen.org';"/></form><aside class="how-drawer"><input id="how-drawer-toggle" type="checkbox"/><label for="how-drawer-toggle" id="how-drawer-label"><span class="how-drawer-icon"></span></label><nav class="how-drawer-content"><ul class="drawermainmenu"><li class="drawermainmenu-home"><a href=".././../../" class="ocsimore_phrasing_link">Home</a>
</li><li class="drawermainmenu-doc"><a href=".././../../tuto/" class="ocsimore_phrasing_link">Doc</a>
</li><li class="drawermainmenu-project"><a href=".././../../eliom/" class="ocsimore_phrasing_link">Eliom</a>
</li><li class="drawermainmenu-project"><a href=".././../../js_of_ocaml/" class="ocsimore_phrasing_link">Js_of_ocaml</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigenserver/" class="ocsimore_phrasing_link">Server</a>
</li><li class="drawermainmenu-project"><a href=".././../../lwt/" class="ocsimore_phrasing_link">Lwt</a>
</li><li class="drawermainmenu-project"><a href=".././../../tyxml/" class="ocsimore_phrasing_link">Tyxml</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigen-toolkit/" class="ocsimore_phrasing_link">Toolkit</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigen-start/" class="ocsimore_phrasing_link">Start</a>
</li><li class="drawermainmenu-project"><a href=".././../../html_of_wiki/" class="ocsimore_phrasing_link">html_of_wiki</a>
</li><li class="drawermainmenu-project"><a href=".././../../deriving/" class="ocsimore_phrasing_link">deriving</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsimore/" class="ocsimore_phrasing_link">Ocsimore (<em>deprecated</em>)</a>
</li><li class="drawermainmenu-page"><a href=".././../../projects" class="ocsimore_phrasing_link">Other projects</a>
</li><li class="drawermainmenu-page"><a href=".././../../papers" class="ocsimore_phrasing_link">Research papers</a>
</li><li class="drawermainmenu-page"><a href=".././../../credits" class="ocsimore_phrasing_link">Who does Ocsigen?</a>
</li><li class="drawermainmenu-page"><a href=".././../../contributing" class="ocsimore_phrasing_link">Contributing</a>
</li><li class="drawermainmenu-page"><a href=".././../../blog" class="ocsimore_phrasing_link">Blog</a>
</li><li class="drawermainmenu-page"><a href=".././../../install" class="ocsimore_phrasing_link">Installation</a>
</li><li class="drawermainmenu-page"><a href="https://github.com/ocsigen" class="ocsimore_phrasing_link">Source code</a>
</li></ul><nav class="how-doctree"><h1> Lwt</h1><h2><a href=".././manual/manual" class="ocsimore_phrasing_link">Overview</a></h2><h1>Lwt - API Reference</h1><h2>Core library</h2><h3><a href=".././api/Lwt" class="ocsimore_phrasing_link">Lwt</a></h3><h3><a href=".././api/Lwt_result" class="ocsimore_phrasing_link">Lwt_result</a></h3><h3><a href=".././api/Lwt_condition" class="ocsimore_phrasing_link">Lwt_condition</a></h3><h3><a href=".././api/Lwt_list" class="ocsimore_phrasing_link">Lwt_list</a></h3><h3><a href=".././api/Lwt_mutex" class="ocsimore_phrasing_link">Lwt_mutex</a></h3><h3><a href=".././api/Lwt_mvar" class="ocsimore_phrasing_link">Lwt_mvar</a></h3><h3><a href=".././api/Lwt_pool" class="ocsimore_phrasing_link">Lwt_pool</a></h3><h3><a href=".././api/Lwt_stream" class="ocsimore_phrasing_link">Lwt_stream</a></h3><h3><a href=".././api/Lwt_switch" class="ocsimore_phrasing_link">Lwt_switch</a></h3><h3><a href=".././api/Lwt_sequence" class="ocsimore_phrasing_link">Lwt_sequence</a></h3><h3><a href=".././api/Lwt_pqueue" class="ocsimore_phrasing_link">Lwt_pqueue</a></h3><h2>Unix bindings</h2><h3><a href=".././api/Lwt_gc" class="ocsimore_phrasing_link">Lwt_gc</a></h3><h3><a href=".././api/Lwt_io" class="ocsimore_phrasing_link">Lwt_io</a></h3><h3><a href=".././api/Lwt_main" class="ocsimore_phrasing_link">Lwt_main</a></h3><h3><a href=".././api/Lwt_engine" class="ocsimore_phrasing_link">Lwt_engine</a></h3><h3><a href=".././api/Lwt_process" class="ocsimore_phrasing_link">Lwt_process</a></h3><h3><a href=".././api/Lwt_throttle" class="ocsimore_phrasing_link">Lwt_throttle</a></h3><h3><a href=".././api/Lwt_timeout" class="ocsimore_phrasing_link">Lwt_timeout</a></h3><h3><a href=".././api/Lwt_unix" class="ocsimore_phrasing_link">Lwt_unix</a></h3><h3><a href=".././api/Lwt_bytes" class="ocsimore_phrasing_link">Lwt_bytes</a></h3><h3><a href=".././api/Lwt_fmt" class="ocsimore_phrasing_link">Lwt_fmt</a></h3><h3><a href=".././api/Lwt_sys" class="ocsimore_phrasing_link">Lwt_sys</a></h3><h2>Reactive programming helpers</h2><h3><a href=".././api/Lwt_react" class="ocsimore_phrasing_link">Lwt_react</a></h3><h2>PPX syntax extension</h2><h3><a href=".././api/Ppx_lwt" class="ocsimore_phrasing_link">Ppx_lwt</a></h3><h2>Miscellaneous</h2><h3><a href=".././api/Lwt_preemptive" class="ocsimore_phrasing_link">Lwt_preemptive</a></h3><h2>Index</h2><h3> <span><a href=".././api/index_types">Index of types</a></span></h3><h3> <span><a href=".././api/index_exceptions">Index of exceptions</a></span></h3><h3> <span><a href=".././api/index_values">Index of values</a></span></h3><h3> <span><a href=".././api/index_attributes">Index of class attributes</a></span></h3><h3> <span><a href=".././api/index_methods">Index of class methods</a></span></h3><h3> <span><a href=".././api/index_classes">Index of classes</a></span></h3><h3> <span><a href=".././api/index_class_types">Index of class types</a></span></h3><h3> <span><a href=".././api/index_modules">Index of modules</a></span></h3><h3> <span><a href=".././api/index_module_types">Index of module types</a></span></h3></nav></nav></aside></div><p class="reasonwarning">Warning: Reason support is experimental.
We are looking for beta-tester and contributors.
</p><button id="reason">Switch to </button><div class="twocols"><nav class="leftcol">Version <select class="how-versions" onchange="location = this.value;"><option value=".././../1.0.0/api/Lwt_seq">1.0.0</option><option value=".././../1.1.0/api/Lwt_seq">1.1.0</option><option value=".././../2.0.0/api/Lwt_seq">2.0.0</option><option value=".././../2.1.0/api/Lwt_seq">2.1.0</option><option value=".././../2.1.1/api/Lwt_seq">2.1.1</option><option value=".././../2.2.0/api/Lwt_seq">2.2.0</option><option value=".././../2.2.1/api/Lwt_seq">2.2.1</option><option value=".././../2.3.0/api/Lwt_seq">2.3.0</option><option value=".././../2.3.1/api/Lwt_seq">2.3.1</option><option value=".././../2.3.2/api/Lwt_seq">2.3.2</option><option value=".././../2.4.0/api/Lwt_seq">2.4.0</option><option value=".././../2.4.1/api/Lwt_seq">2.4.1</option><option value=".././../2.4.2/api/Lwt_seq">2.4.2</option><option value=".././../2.4.3/api/Lwt_seq">2.4.3</option><option value=".././../2.4.7/api/Lwt_seq">2.4.7</option><option value=".././../2.4.8/api/Lwt_seq">2.4.8</option><option value=".././../2.5.0/api/Lwt_seq">2.5.0</option><option value=".././../2.5.1/api/Lwt_seq">2.5.1</option><option value=".././../2.5.2/api/Lwt_seq">2.5.2</option><option value=".././../2.6.0/api/Lwt_seq">2.6.0</option><option value=".././../2.7.0/api/Lwt_seq">2.7.0</option><option value=".././../2.7.1/api/Lwt_seq">2.7.1</option><option value=".././../3.0.0/api/Lwt_seq">3.0.0</option><option value=".././../3.1.0/api/Lwt_seq">3.1.0</option><option value=".././../3.2.1/api/Lwt_seq">3.2.1</option><option value=".././../3.3.0/api/Lwt_seq">3.3.0</option><option value=".././../4.0.0/api/Lwt_seq">4.0.0</option><option value=".././../4.0.1/api/Lwt_seq">4.0.1</option><option value=".././../4.1.0/api/Lwt_seq">4.1.0</option><option value=".././../4.2.0/api/Lwt_seq">4.2.0</option><option value=".././../4.2.1/api/Lwt_seq">4.2.1</option><option value=".././../4.3.0/api/Lwt_seq">4.3.0</option><option value=".././../4.3.1/api/Lwt_seq">4.3.1</option><option value=".././../4.4.0/api/Lwt_seq">4.4.0</option><option value=".././../4.5.0/api/Lwt_seq">4.5.0</option><option value=".././../5.0.0/api/Lwt_seq">5.0.0</option><option value=".././../5.0.1/api/Lwt_seq">5.0.1</option><option value=".././../5.1.0/api/Lwt_seq">5.1.0</option><option value=".././../5.1.1/api/Lwt_seq">5.1.1</option><option value=".././../5.1.2/api/Lwt_seq">5.1.2</option><option value=".././../5.2.0/api/Lwt_seq">5.2.0</option><option value=".././../5.3.0/api/Lwt_seq">5.3.0</option><option value=".././../5.4.0/api/Lwt_seq">5.4.0</option><option value=".././../5.4.1/api/Lwt_seq">5.4.1</option><option value=".././../5.4.2/api/Lwt_seq">5.4.2</option><option value=".././../5.5.0/api/Lwt_seq" selected="selected">5.5.0</option><option value=".././../dev/api/Lwt_seq">dev</option></select><nav class="how-doctree"><h1> Lwt</h1><h2><a href=".././manual/manual" class="ocsimore_phrasing_link">Overview</a></h2><h1>Lwt - API Reference</h1><h2>Core library</h2><h3><a href=".././api/Lwt" class="ocsimore_phrasing_link">Lwt</a></h3><h3><a href=".././api/Lwt_result" class="ocsimore_phrasing_link">Lwt_result</a></h3><h3><a href=".././api/Lwt_condition" class="ocsimore_phrasing_link">Lwt_condition</a></h3><h3><a href=".././api/Lwt_list" class="ocsimore_phrasing_link">Lwt_list</a></h3><h3><a href=".././api/Lwt_mutex" class="ocsimore_phrasing_link">Lwt_mutex</a></h3><h3><a href=".././api/Lwt_mvar" class="ocsimore_phrasing_link">Lwt_mvar</a></h3><h3><a href=".././api/Lwt_pool" class="ocsimore_phrasing_link">Lwt_pool</a></h3><h3><a href=".././api/Lwt_stream" class="ocsimore_phrasing_link">Lwt_stream</a></h3><h3><a href=".././api/Lwt_switch" class="ocsimore_phrasing_link">Lwt_switch</a></h3><h3><a href=".././api/Lwt_sequence" class="ocsimore_phrasing_link">Lwt_sequence</a></h3><h3><a href=".././api/Lwt_pqueue" class="ocsimore_phrasing_link">Lwt_pqueue</a></h3><h2>Unix bindings</h2><h3><a href=".././api/Lwt_gc" class="ocsimore_phrasing_link">Lwt_gc</a></h3><h3><a href=".././api/Lwt_io" class="ocsimore_phrasing_link">Lwt_io</a></h3><h3><a href=".././api/Lwt_main" class="ocsimore_phrasing_link">Lwt_main</a></h3><h3><a href=".././api/Lwt_engine" class="ocsimore_phrasing_link">Lwt_engine</a></h3><h3><a href=".././api/Lwt_process" class="ocsimore_phrasing_link">Lwt_process</a></h3><h3><a href=".././api/Lwt_throttle" class="ocsimore_phrasing_link">Lwt_throttle</a></h3><h3><a href=".././api/Lwt_timeout" class="ocsimore_phrasing_link">Lwt_timeout</a></h3><h3><a href=".././api/Lwt_unix" class="ocsimore_phrasing_link">Lwt_unix</a></h3><h3><a href=".././api/Lwt_bytes" class="ocsimore_phrasing_link">Lwt_bytes</a></h3><h3><a href=".././api/Lwt_fmt" class="ocsimore_phrasing_link">Lwt_fmt</a></h3><h3><a href=".././api/Lwt_sys" class="ocsimore_phrasing_link">Lwt_sys</a></h3><h2>Reactive programming helpers</h2><h3><a href=".././api/Lwt_react" class="ocsimore_phrasing_link">Lwt_react</a></h3><h2>PPX syntax extension</h2><h3><a href=".././api/Ppx_lwt" class="ocsimore_phrasing_link">Ppx_lwt</a></h3><h2>Miscellaneous</h2><h3><a href=".././api/Lwt_preemptive" class="ocsimore_phrasing_link">Lwt_preemptive</a></h3><h2>Index</h2><h3> <span><a href=".././api/index_types">Index of types</a></span></h3><h3> <span><a href=".././api/index_exceptions">Index of exceptions</a></span></h3><h3> <span><a href=".././api/index_values">Index of values</a></span></h3><h3> <span><a href=".././api/index_attributes">Index of class attributes</a></span></h3><h3> <span><a href=".././api/index_methods">Index of class methods</a></span></h3><h3> <span><a href=".././api/index_classes">Index of classes</a></span></h3><h3> <span><a href=".././api/index_class_types">Index of class types</a></span></h3><h3> <span><a href=".././api/index_modules">Index of modules</a></span></h3><h3> <span><a href=".././api/index_module_types">Index of module types</a></span></h3></nav></nav><article class="rightcol"><h1>Module <span><a href=".././api/Lwt_seq">Lwt_seq</a></span> </h1><pre class="ocsforge_color odocwiki_code"><span class="ocsforge_color_keyword">module</span> <span class="ocsforge_color_uid"><span class="ocsforge_color_uid">Lwt_seq</span></span> <span class="ocsforge_color_delimiter">:</span> <span class="ocsforge_color_keyword">sig</span><span><a href=".././api/Lwt_seq">..</a></span><span class="ocsforge_color_keyword">end</span></pre><p><strong>Since</strong> 5.5.0<br/>
</p><hr/><pre class="ocsforge_color odocwiki_code" id="TYPEt"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_type">'a</span> <span class="odocwiki_name">t</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEnode">node</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>The type of delayed lists containing elements of type <span class="odocwiki_inlinecode">'a</span>.
Note that the concrete list node <span class="odocwiki_inlinecode">'a node</span> is delayed under a closure,
not a <span class="odocwiki_inlinecode">lazy</span> block, which means it might be recomputed every time
we access it.</p></div><pre class="ocsforge_color odocwiki_code" id="TYPEnode"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_type">'a</span> <span class="odocwiki_name">node</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Nil</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Cons</span> <span class="ocsforge_color_keyword">of</span> <span class="odocwiki_type">'a * 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span></span></span><span class="odocwiki_comments"><span class="odocwiki_comments_open">(*</span> <span>&lt;&lt;div class=&quot;odocwiki_info&quot;|~A fully~-evaluated list node~, either empty or containing an element
  and a delayed tail~.
&gt;&gt;</span><span class="odocwiki_comments_close"> *)</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALempty"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">empty</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span></span></pre><div class="odocwiki_info"><p>The empty sequence, containing no elements.</p></div><pre class="ocsforge_color odocwiki_code" id="VALreturn"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">return</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">'a <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span></span></pre><div class="odocwiki_info"><p>The singleton sequence containing only the given element.</p></div><pre class="ocsforge_color odocwiki_code" id="VALreturn_lwt"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">return_lwt</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">'a <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span></span></pre><div class="odocwiki_info"><p>The singleton sequence containing only the given promised element.</p></div><pre class="ocsforge_color odocwiki_code" id="VALcons"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">cons</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">'a <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">cons x xs</span> is the sequence containing the element <span class="odocwiki_inlinecode">x</span> followed by
the sequence <span class="odocwiki_inlinecode">xs</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALcons_lwt"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">cons_lwt</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">'a <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">cons x xs</span> is the sequence containing the element promised by <span class="odocwiki_inlinecode">x</span> followed
by the sequence <span class="odocwiki_inlinecode">xs</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALappend"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">append</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">append xs ys</span> is the sequence <span class="odocwiki_inlinecode">xs</span> followed by the sequence <span class="odocwiki_inlinecode">ys</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALmap"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">map</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_delimiter">(</span>'a <span class="ocsforge_color_delimiter">-&gt;</span> 'b<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> 'b <span><a href=".././api/Lwt_seq#TYPEt">t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">map f seq</span> returns a new sequence whose elements are the elements of
<span class="odocwiki_inlinecode">seq</span>, transformed by <span class="odocwiki_inlinecode">f</span>.
This transformation is lazy, it only applies when the result is traversed.</p></div><pre class="ocsforge_color odocwiki_code" id="VALmap_s"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">map_s</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_delimiter">(</span>'a <span class="ocsforge_color_delimiter">-&gt;</span> 'b <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> 'b <span><a href=".././api/Lwt_seq#TYPEt">t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">map_s f seq</span> is like <span class="odocwiki_inlinecode">map f seq</span> but <span class="odocwiki_inlinecode">f</span> is a function that returns a
promise.
</p><p>Note that there is no concurrency between the promises from the underlying
sequence <span class="odocwiki_inlinecode">seq</span> and the promises from applying the function <span class="odocwiki_inlinecode">f</span>. In other
words, the next promise-element of the underlying sequence (<span class="odocwiki_inlinecode">seq</span>) is only
created when the current promise-element of the returned sequence (as mapped
by <span class="odocwiki_inlinecode">f</span>) has resolved. This scheduling is true for all the <span class="odocwiki_inlinecode">_s</span> functions of
this module.</p></div><pre class="ocsforge_color odocwiki_code" id="VALfilter"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">filter</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_delimiter">(</span>'a <span class="ocsforge_color_delimiter">-&gt;</span> bool<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span></span></pre><div class="odocwiki_info"><p>Remove from the sequence the elements that do not satisfy the
given predicate.
This transformation is lazy, it only applies when the result is
traversed.</p></div><pre class="ocsforge_color odocwiki_code" id="VALfilter_s"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">filter_s</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_delimiter">(</span>'a <span class="ocsforge_color_delimiter">-&gt;</span> bool <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">filter_s</span> is like <span class="odocwiki_inlinecode">filter</span> but the predicate returns a promise.
</p><p>See <span><a href=".././api/Lwt_seq#VALmap_s">Lwt_seq.map_s</a></span> for additional details about scheduling.</p></div><pre class="ocsforge_color odocwiki_code" id="VALfilter_map"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">filter_map</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_delimiter">(</span>'a <span class="ocsforge_color_delimiter">-&gt;</span> 'b option<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> 'b <span><a href=".././api/Lwt_seq#TYPEt">t</a></span></span></pre><div class="odocwiki_info"><p>Apply the function to every element; if <span class="odocwiki_inlinecode">f x = None</span> then <span class="odocwiki_inlinecode">x</span> is dropped;
if <span class="odocwiki_inlinecode">f x = Some y</span> then <span class="odocwiki_inlinecode">y</span> is returned.
This transformation is lazy, it only applies when the result is
traversed.</p></div><pre class="ocsforge_color odocwiki_code" id="VALfilter_map_s"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">filter_map_s</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_delimiter">(</span>'a <span class="ocsforge_color_delimiter">-&gt;</span> 'b option <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> 'b <span><a href=".././api/Lwt_seq#TYPEt">t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">filter_map_s</span> is like <span class="odocwiki_inlinecode">filter</span> but the predicate returns a promise.
</p><p>See <span><a href=".././api/Lwt_seq#VALmap_s">Lwt_seq.map_s</a></span> for additional details about scheduling.</p></div><pre class="ocsforge_color odocwiki_code" id="VALflat_map"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">flat_map</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_delimiter">(</span>'a <span class="ocsforge_color_delimiter">-&gt;</span> 'b <span><a href=".././api/Lwt_seq#TYPEt">t</a></span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> 'b <span><a href=".././api/Lwt_seq#TYPEt">t</a></span></span></pre><div class="odocwiki_info"><p>Map each element to a subsequence, then return each element of this
sub-sequence in turn.
This transformation is lazy, it only applies when the result is
traversed.</p></div><pre class="ocsforge_color odocwiki_code" id="VALfold_left"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">fold_left</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_delimiter">(</span>'a <span class="ocsforge_color_delimiter">-&gt;</span> 'b <span class="ocsforge_color_delimiter">-&gt;</span> 'a<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span class="ocsforge_color_delimiter">-&gt;</span> 'b <span><a href=".././api/Lwt_seq#TYPEt">t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Traverse the sequence from left to right, combining each element with the
accumulator using the given function.
The traversal happens immediately and will not terminate (i.e., the promise
will not resolve) on infinite sequences.</p></div><pre class="ocsforge_color odocwiki_code" id="VALfold_left_s"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">fold_left_s</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_delimiter">(</span>'a <span class="ocsforge_color_delimiter">-&gt;</span> 'b <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span class="ocsforge_color_delimiter">-&gt;</span> 'b <span><a href=".././api/Lwt_seq#TYPEt">t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">fold_left_s</span> is like <span class="odocwiki_inlinecode">fold_left</span> but the function returns a promise.
</p><p>See <span><a href=".././api/Lwt_seq#VALmap_s">Lwt_seq.map_s</a></span> for additional details about scheduling.</p></div><pre class="ocsforge_color odocwiki_code" id="VALiter"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">iter</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_delimiter">(</span>'a <span class="ocsforge_color_delimiter">-&gt;</span> unit<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Iterate on the sequence, calling the (imperative) function on every element.
</p><p>The sequence's next node is evaluated only once the function has finished
processing the current element. More formally: the promise for the <span class="odocwiki_inlinecode">n+1</span>th
node of the sequence is created only once the promise returned by <span class="odocwiki_inlinecode">f</span> on the
<span class="odocwiki_inlinecode">n</span>th element of the sequence has resolved.
</p><p>The traversal happens immediately and will not terminate (i.e., the promise
will not resolve) on infinite sequences.</p></div><pre class="ocsforge_color odocwiki_code" id="VALiter_s"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">iter_s</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_delimiter">(</span>'a <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">iter_s</span> is like <span class="odocwiki_inlinecode">iter</span> but the function returns a promise.
</p><p>See <span><a href=".././api/Lwt_seq#VALmap_s">Lwt_seq.map_s</a></span> for additional details about scheduling.</p></div><pre class="ocsforge_color odocwiki_code" id="VALiter_p"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">iter_p</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_delimiter">(</span>'a <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Iterate on the sequence, calling the (imperative) function on every element.
</p><p>The sequence's next node is evaluated as soon as the previous node is
resolved.
</p><p>The traversal happens immediately and will not terminate (i.e., the promise
will not resolve) on infinite sequences.</p></div><pre class="ocsforge_color odocwiki_code" id="VALiter_n"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">iter_n</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?max_concurrency:</span>int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_delimiter">(</span>'a <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">iter_n ~max_concurrency f s</span>
</p><p>Iterates on the sequence <span class="odocwiki_inlinecode">s</span>, calling the (imperative) function <span class="odocwiki_inlinecode">f</span> on every
element.
</p><p>The sum total of unresolved promises returned by <span class="odocwiki_inlinecode">f</span> never exceeds
<span class="odocwiki_inlinecode">max_concurrency</span>. Node suspensions are evaluated only when there is capacity
for <span class="odocwiki_inlinecode">f</span>-promises to be evaluated. Consequently, there might be significantly
fewer than <span class="odocwiki_inlinecode">max_concurrency</span> promises being evaluated concurrently; especially
if the node suspensions take longer to evaluate than the <span class="odocwiki_inlinecode">f</span>-promises.
</p><p>The traversal happens immediately and will not terminate (i.e., the promise
will not resolve) on infinite sequences.
<strong>Raises</strong> <span class="teletype">Invalid_argument</span> if <span class="odocwiki_inlinecode">max_concurrency &lt; 1</span>.<br/></p></div><div class="odocwiki_param_info"><p><span class="code">max_concurrency</span> : defaults to <span class="odocwiki_inlinecode">1</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALunfold"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">unfold</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_delimiter">(</span>'b <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_delimiter">(</span>'a * 'b<span class="ocsforge_color_delimiter">)</span> option<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'b <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span></span></pre><div class="odocwiki_info"><p>Build a sequence from a step function and an initial value.
<span class="odocwiki_inlinecode">unfold f u</span> returns <span class="odocwiki_inlinecode">empty</span> if the promise <span class="odocwiki_inlinecode">f u</span> resolves to <span class="odocwiki_inlinecode">None</span>,
or <span class="odocwiki_inlinecode">fun () -&gt; Lwt.return (Cons (x, unfold f y))</span> if the promise <span class="odocwiki_inlinecode">f u</span> resolves
to <span class="odocwiki_inlinecode">Some (x, y)</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALunfold_lwt"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">unfold_lwt</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_delimiter">(</span>'b <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_delimiter">(</span>'a * 'b<span class="ocsforge_color_delimiter">)</span> option <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'b <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">unfold_lwt</span> is like <span class="odocwiki_inlinecode">unfold</span> but the step function returns a promise.</p></div><pre class="ocsforge_color odocwiki_code" id="VALto_list"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">to_list</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a list <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Convert a sequence to a list, preserving order.
The traversal happens immediately and will not terminate (i.e., the promise
will not resolve) on infinite sequences.</p></div><pre class="ocsforge_color odocwiki_code" id="VALof_list"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">of_list</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">'a list <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span></span></pre><div class="odocwiki_info"><p>Convert a list to a sequence, preserving order.</p></div><pre class="ocsforge_color odocwiki_code" id="VALof_seq"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">of_seq</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">'a <span class="ocsforge_color_uid">Stdlib</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Seq</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span></span></pre><div class="odocwiki_info"><p>Convert from <span class="odocwiki_inlinecode">'a Stdlib.Seq.t</span> to <span class="odocwiki_inlinecode">'a Lwt_seq.t</span>.
This transformation is lazy, it only applies when the result is
traversed.</p></div><pre class="ocsforge_color odocwiki_code" id="VALof_seq_lwt"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">of_seq_lwt</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">'a <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span> <span class="ocsforge_color_uid">Stdlib</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_uid">Seq</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">t</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_seq#TYPEt">t</a></span></span></pre><div class="odocwiki_info"><p>Convert from <span class="odocwiki_inlinecode">'a Lwt.t Stdlib.Seq.t</span> to <span class="odocwiki_inlinecode">'a Lwt_seq.t</span>.
This transformation is lazy, it only applies when the result is
traversed.</p></div></article></div></div></body></html>
