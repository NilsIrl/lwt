<html><head><title>Module Lwt_log </title><meta charset="utf8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link rel="stylesheet" href="https://ocsigen.org/css/style.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/themes/prism.min.css"/><script type="text/javascript" src="https://ocsigen.org/js/client.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-core.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-ocaml.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-clike.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-reason.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-javascript.min.js">
//<![CDATA[

//]]>
</script></head><body class="Lwt_log lwt"><div class="project-page"><div class="page-header"><p class="logo-ocsigen"><a href=".././../../" class="ocsimore_phrasing_link"><img src=".././../../img/ocsigen-white.svg" alt="Ocsigen"/></a>
</p><p class="logo-subproject">Lwt</p><div class="mainmenu"><p class="mainmenu-home"><a href=".././../../" class="ocsimore_phrasing_link">Home</a></p><p class="mainmenu-doc"><a href=".././../../tuto/" class="ocsimore_phrasing_link">Doc</a></p><p><a href=".././../../eliom/" class="ocsimore_phrasing_link">Eliom</a></p><p><a href=".././../../js_of_ocaml/" class="ocsimore_phrasing_link">Js_of_ocaml</a></p><p class="mainmenu-current"><a href=".././../../lwt/" class="ocsimore_phrasing_link">Lwt</a></p><p><a href=".././../../tyxml/" class="ocsimore_phrasing_link">Tyxml</a></p><p><a href=".././../../ocsigen-start/" class="ocsimore_phrasing_link">Start</a></p></div><form id="googlesearch" action="https://google.com/search"><input name="q" id="gsearch-box" placeholder="Search using Google"/><label for="gsearch-box"><img src="/img/search.svg" alt="" id="gsearch-icon"/></label><input type="submit" id="gsearch-submit" onclick="document.getElementById('gsearch-box').value += ' site:ocsigen.org';"/></form><aside class="how-drawer"><input id="how-drawer-toggle" type="checkbox"/><label for="how-drawer-toggle" id="how-drawer-label"><span class="how-drawer-icon"></span></label><nav class="how-drawer-content"><ul class="drawermainmenu"><li class="drawermainmenu-home"><a href=".././../../" class="ocsimore_phrasing_link">Home</a>
</li><li class="drawermainmenu-doc"><a href=".././../../tuto/" class="ocsimore_phrasing_link">Doc</a>
</li><li class="drawermainmenu-project"><a href=".././../../eliom/" class="ocsimore_phrasing_link">Eliom</a>
</li><li class="drawermainmenu-project"><a href=".././../../js_of_ocaml/" class="ocsimore_phrasing_link">Js_of_ocaml</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigenserver/" class="ocsimore_phrasing_link">Server</a>
</li><li class="drawermainmenu-project"><a href=".././../../lwt/" class="ocsimore_phrasing_link">Lwt</a>
</li><li class="drawermainmenu-project"><a href=".././../../tyxml/" class="ocsimore_phrasing_link">Tyxml</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigen-toolkit/" class="ocsimore_phrasing_link">Toolkit</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigen-start/" class="ocsimore_phrasing_link">Start</a>
</li><li class="drawermainmenu-project"><a href=".././../../html_of_wiki/" class="ocsimore_phrasing_link">html_of_wiki</a>
</li><li class="drawermainmenu-project"><a href=".././../../deriving/" class="ocsimore_phrasing_link">deriving</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsimore/" class="ocsimore_phrasing_link">Ocsimore (<em>deprecated</em>)</a>
</li><li class="drawermainmenu-page"><a href=".././../../projects" class="ocsimore_phrasing_link">Other projects</a>
</li><li class="drawermainmenu-page"><a href=".././../../papers" class="ocsimore_phrasing_link">Research papers</a>
</li><li class="drawermainmenu-page"><a href=".././../../credits" class="ocsimore_phrasing_link">Who does Ocsigen?</a>
</li><li class="drawermainmenu-page"><a href=".././../../contributing" class="ocsimore_phrasing_link">Contributing</a>
</li><li class="drawermainmenu-page"><a href=".././../../blog" class="ocsimore_phrasing_link">Blog</a>
</li><li class="drawermainmenu-page"><a href=".././../../install" class="ocsimore_phrasing_link">Installation</a>
</li><li class="drawermainmenu-page"><a href="https://github.com/ocsigen" class="ocsimore_phrasing_link">Source code</a>
</li></ul><nav class="how-doctree"><h1>Lwt - API Reference</h1><h2>Core library</h2><h3><a href=".././api/Lwt" class="ocsimore_phrasing_link">Lwt</a></h3><h3><a href=".././api/Lwt_condition" class="ocsimore_phrasing_link">Lwt_condition</a></h3><h3><a href=".././api/Lwt_list" class="ocsimore_phrasing_link">Lwt_list</a></h3><h3><a href=".././api/Lwt_mutex" class="ocsimore_phrasing_link">Lwt_mutex</a></h3><h3><a href=".././api/Lwt_mvar" class="ocsimore_phrasing_link">Lwt_mvar</a></h3><h3><a href=".././api/Lwt_pool" class="ocsimore_phrasing_link">Lwt_pool</a></h3><h3><a href=".././api/Lwt_sequence" class="ocsimore_phrasing_link">Lwt_sequence</a></h3><h3><a href=".././api/Lwt_stream" class="ocsimore_phrasing_link">Lwt_stream</a></h3><h2>Unix bindings</h2><h3><a href=".././api/Lwt_daemon" class="ocsimore_phrasing_link">Lwt_daemon</a></h3><h3><a href=".././api/Lwt_gc" class="ocsimore_phrasing_link">Lwt_gc</a></h3><h3><a href=".././api/Lwt_io" class="ocsimore_phrasing_link">Lwt_io</a></h3><h3><a href=".././api/Lwt_log" class="ocsimore_phrasing_link">Lwt_log</a></h3><h3><a href=".././api/Lwt_main" class="ocsimore_phrasing_link">Lwt_main</a></h3><h3><a href=".././api/Lwt_process" class="ocsimore_phrasing_link">Lwt_process</a></h3><h3><a href=".././api/Lwt_throttle" class="ocsimore_phrasing_link">Lwt_throttle</a></h3><h3><a href=".././api/Lwt_timeout" class="ocsimore_phrasing_link">Lwt_timeout</a></h3><h3><a href=".././api/Lwt_unix" class="ocsimore_phrasing_link">Lwt_unix</a></h3><h2>Reactive programming helpers</h2><h3><a href=".././api/Lwt_event" class="ocsimore_phrasing_link">Lwt_event</a></h3><h3><a href=".././api/Lwt_signal" class="ocsimore_phrasing_link">Lwt_signal</a></h3><h2>Syntax extensions</h2><h3><a href=".././api/Pa_lwt" class="ocsimore_phrasing_link">Pa_lwt</a></h3><h3><a href=".././api/Pa_log" class="ocsimore_phrasing_link">Pa_log</a></h3><h2>Terminal manipulation</h2><h3><a href=".././api/Lwt_read_line" class="ocsimore_phrasing_link">Lwt_read_line</a></h3><h3><a href=".././api/Lwt_term" class="ocsimore_phrasing_link">Lwt_term</a></h3><h3><a href=".././api/Lwt_text" class="ocsimore_phrasing_link">Lwt_text</a></h3><h2>Miscellaneous</h2><h3><a href=".././api/Lwt_glib" class="ocsimore_phrasing_link">Lwt_glib</a></h3><h3><a href=".././api/Lwt_lib" class="ocsimore_phrasing_link">Lwt_lib</a></h3><h3><a href=".././api/Lwt_preemptive" class="ocsimore_phrasing_link">Lwt_preemptive</a></h3><h3><a href=".././api/Lwt_ssl" class="ocsimore_phrasing_link">Lwt_ssl</a></h3><h2>Index</h2></nav></nav></aside></div><p class="reasonwarning">Warning: Reason support is experimental.
We are looking for beta-tester and contributors.
</p><button id="reason">Switch to </button><div class="twocols"><nav class="leftcol">Version <select class="how-versions" onchange="location = this.value;"><option value=".././../1.0.0/api/Lwt_log">1.0.0</option><option value=".././../1.1.0/api/Lwt_log">1.1.0</option><option value=".././../2.0.0/api/Lwt_log">2.0.0</option><option value=".././../2.1.0/api/Lwt_log" selected="selected">2.1.0</option><option value=".././../2.1.1/api/Lwt_log">2.1.1</option><option value=".././../2.2.0/api/Lwt_log">2.2.0</option><option value=".././../2.2.1/api/Lwt_log">2.2.1</option><option value=".././../2.3.0/api/Lwt_log">2.3.0</option><option value=".././../2.3.1/api/Lwt_log">2.3.1</option><option value=".././../2.3.2/api/Lwt_log">2.3.2</option><option value=".././../2.4.0/api/Lwt_log">2.4.0</option><option value=".././../2.4.1/api/Lwt_log">2.4.1</option><option value=".././../2.4.2/api/Lwt_log">2.4.2</option><option value=".././../2.4.3/api/Lwt_log">2.4.3</option><option value=".././../2.4.7/api/Lwt_log">2.4.7</option><option value=".././../2.4.8/api/Lwt_log">2.4.8</option><option value=".././../2.5.0/api/Lwt_log">2.5.0</option><option value=".././../2.5.1/api/Lwt_log">2.5.1</option><option value=".././../2.5.2/api/Lwt_log">2.5.2</option><option value=".././../2.6.0/api/Lwt_log">2.6.0</option><option value=".././../2.7.0/api/Lwt_log">2.7.0</option><option value=".././../2.7.1/api/Lwt_log">2.7.1</option><option value=".././../3.0.0/api/Lwt_log">3.0.0</option><option value=".././../3.1.0/api/Lwt_log">3.1.0</option><option value=".././../3.2.1/api/Lwt_log">3.2.1</option><option value=".././../3.3.0/api/Lwt_log">3.3.0</option><option value=".././../4.0.0/api/Lwt_log">4.0.0</option><option value=".././../4.0.1/api/Lwt_log">4.0.1</option><option value=".././../4.1.0/api/Lwt_log">4.1.0</option><option value=".././../4.2.0/api/Lwt_log">4.2.0</option><option value=".././../4.2.1/api/Lwt_log">4.2.1</option><option value=".././../4.3.0/api/Lwt_log">4.3.0</option><option value=".././../4.3.1/api/Lwt_log">4.3.1</option><option value=".././../4.4.0/api/Lwt_log">4.4.0</option><option value=".././../4.5.0/api/Lwt_log">4.5.0</option><option value=".././../5.0.0/api/Lwt_log">5.0.0</option><option value=".././../5.0.1/api/Lwt_log">5.0.1</option><option value=".././../5.1.0/api/Lwt_log">5.1.0</option><option value=".././../5.1.1/api/Lwt_log">5.1.1</option><option value=".././../5.1.2/api/Lwt_log">5.1.2</option><option value=".././../5.2.0/api/Lwt_log">5.2.0</option><option value=".././../5.3.0/api/Lwt_log">5.3.0</option><option value=".././../dev/api/Lwt_log">dev</option></select><nav class="how-doctree"><h1>Lwt - API Reference</h1><h2>Core library</h2><h3><a href=".././api/Lwt" class="ocsimore_phrasing_link">Lwt</a></h3><h3><a href=".././api/Lwt_condition" class="ocsimore_phrasing_link">Lwt_condition</a></h3><h3><a href=".././api/Lwt_list" class="ocsimore_phrasing_link">Lwt_list</a></h3><h3><a href=".././api/Lwt_mutex" class="ocsimore_phrasing_link">Lwt_mutex</a></h3><h3><a href=".././api/Lwt_mvar" class="ocsimore_phrasing_link">Lwt_mvar</a></h3><h3><a href=".././api/Lwt_pool" class="ocsimore_phrasing_link">Lwt_pool</a></h3><h3><a href=".././api/Lwt_sequence" class="ocsimore_phrasing_link">Lwt_sequence</a></h3><h3><a href=".././api/Lwt_stream" class="ocsimore_phrasing_link">Lwt_stream</a></h3><h2>Unix bindings</h2><h3><a href=".././api/Lwt_daemon" class="ocsimore_phrasing_link">Lwt_daemon</a></h3><h3><a href=".././api/Lwt_gc" class="ocsimore_phrasing_link">Lwt_gc</a></h3><h3><a href=".././api/Lwt_io" class="ocsimore_phrasing_link">Lwt_io</a></h3><h3><a href=".././api/Lwt_log" class="ocsimore_phrasing_link">Lwt_log</a></h3><h3><a href=".././api/Lwt_main" class="ocsimore_phrasing_link">Lwt_main</a></h3><h3><a href=".././api/Lwt_process" class="ocsimore_phrasing_link">Lwt_process</a></h3><h3><a href=".././api/Lwt_throttle" class="ocsimore_phrasing_link">Lwt_throttle</a></h3><h3><a href=".././api/Lwt_timeout" class="ocsimore_phrasing_link">Lwt_timeout</a></h3><h3><a href=".././api/Lwt_unix" class="ocsimore_phrasing_link">Lwt_unix</a></h3><h2>Reactive programming helpers</h2><h3><a href=".././api/Lwt_event" class="ocsimore_phrasing_link">Lwt_event</a></h3><h3><a href=".././api/Lwt_signal" class="ocsimore_phrasing_link">Lwt_signal</a></h3><h2>Syntax extensions</h2><h3><a href=".././api/Pa_lwt" class="ocsimore_phrasing_link">Pa_lwt</a></h3><h3><a href=".././api/Pa_log" class="ocsimore_phrasing_link">Pa_log</a></h3><h2>Terminal manipulation</h2><h3><a href=".././api/Lwt_read_line" class="ocsimore_phrasing_link">Lwt_read_line</a></h3><h3><a href=".././api/Lwt_term" class="ocsimore_phrasing_link">Lwt_term</a></h3><h3><a href=".././api/Lwt_text" class="ocsimore_phrasing_link">Lwt_text</a></h3><h2>Miscellaneous</h2><h3><a href=".././api/Lwt_glib" class="ocsimore_phrasing_link">Lwt_glib</a></h3><h3><a href=".././api/Lwt_lib" class="ocsimore_phrasing_link">Lwt_lib</a></h3><h3><a href=".././api/Lwt_preemptive" class="ocsimore_phrasing_link">Lwt_preemptive</a></h3><h3><a href=".././api/Lwt_ssl" class="ocsimore_phrasing_link">Lwt_ssl</a></h3><h2>Index</h2></nav></nav><article class="rightcol"><h1>Module <span><a href=".././api/Lwt_log">Lwt_log</a></span> </h1><div class="code"><p><span class="keyword">module</span> Lwt_log: <span class="code">sig</span><span><a href=".././api/Lwt_log">..</a></span><span class="code">end</span></p></div><p>Logging facility<br/>
</p><hr/><p><br/>
This module provides functions to deal with logging.
It support:<br/>
</p><ul><li> logging to the syslog daemon
</li><li> logging to a channel (stderr, stdout, ...)
</li><li> logging to a file
</li><li> logging to multiple destination at the same time
</li></ul><p><br/>
<br/>
</p><h6 id="6_Types">Types <a class="backref" href="#6_Types">&#182;</a></h6><p><br/>
</p><div class="code" id="TYPElevel"><p><span class="keyword">type</span> level = 
</p><table class="typetable"><tr><td class="lefttop"><span class="keyword"><span class="teletype">|</span></span></td><td class="lefttop"><span class="constructor">Debug</span></td><td class="typefieldcomment lefttop startcom"><span class="teletype">(*</span></td><td class="typefieldcomment lefttop">Debugging message. They can be automatically removed byt hte
syntax extension.</td><td class="typefieldcomment leftbottom endcom"><span class="teletype">*)</span></td></tr><tr><td class="lefttop"><span class="keyword"><span class="teletype">|</span></span></td><td class="lefttop"><span class="constructor">Info</span></td><td class="typefieldcomment lefttop startcom"><span class="teletype">(*</span></td><td class="typefieldcomment lefttop">Informational message. Suitable to be displayed when the
program is in verbose mode.</td><td class="typefieldcomment leftbottom endcom"><span class="teletype">*)</span></td></tr><tr><td class="lefttop"><span class="keyword"><span class="teletype">|</span></span></td><td class="lefttop"><span class="constructor">Notice</span></td><td class="typefieldcomment lefttop startcom"><span class="teletype">(*</span></td><td class="typefieldcomment lefttop">Same as <span class="code">Info</span>, but is displayed by default.</td><td class="typefieldcomment leftbottom endcom"><span class="teletype">*)</span></td></tr><tr><td class="lefttop"><span class="keyword"><span class="teletype">|</span></span></td><td class="lefttop"><span class="constructor">Warning</span></td><td class="typefieldcomment lefttop startcom"><span class="teletype">(*</span></td><td class="typefieldcomment lefttop">Something strange happend</td><td class="typefieldcomment leftbottom endcom"><span class="teletype">*)</span></td></tr><tr><td class="lefttop"><span class="keyword"><span class="teletype">|</span></span></td><td class="lefttop"><span class="constructor">Error</span></td><td class="typefieldcomment lefttop startcom"><span class="teletype">(*</span></td><td class="typefieldcomment lefttop">An error message, which should not means the end of the
program.</td><td class="typefieldcomment leftbottom endcom"><span class="teletype">*)</span></td></tr><tr><td class="lefttop"><span class="keyword"><span class="teletype">|</span></span></td><td class="lefttop"><span class="constructor">Fatal</span></td><td class="typefieldcomment lefttop startcom"><span class="teletype">(*</span></td><td class="typefieldcomment lefttop">A fatal error happened, in most cases the program will end
after a fatal error.</td><td class="typefieldcomment leftbottom endcom"><span class="teletype">*)</span></td></tr></table></div><div class="info"><p>Type of log levels. A level determines the importance of a
message<br/></p></div><div class="code" id="TYPElogger"><p><span class="keyword">type</span> logger</p></div><div class="info"><p>Type of a logger. A logger is responsible for dispatching messages
and storing them somewhere.<br/>
</p><p>Lwt provides loggers sending log messages to a file, syslog,
... but you can also create you own logger.<br/></p></div><div class="code" id="TYPEsection"><p><span class="keyword">type</span> section</p></div><div class="info"><p>Each logging message has a section. Sections can be used to
structure your logs. For example you can choose different
loggers according to the section.<br/>
</p><p>Each section carries a level, and messages with a lower log
level than than the section level will be dropped.<br/>
</p><p>Section levels are initialised using the <span class="code">LWT_LOG</span> environment
variable, which must contains one or more rules of the form
<span class="code">pattern -&gt; level</span> separated by &quot;;&quot;. Where <span class="code">pattern</span> is a string
that may contain <span class="code">*</span>.<br/>
</p><p>For example, if <span class="code">LWT_LOG</span> contains:

</p><pre>        access -&gt; warning;
        foo[*] -&gt; error
      
</pre><p>then the level of the section <span class="code">&quot;access&quot;</span> is <span class="code">Warning</span> and the
level of any section matching <span class="code">&quot;foo[*]&quot;</span> is <span class="code">Error</span>.<br/>
</p><p>If <span class="code">LWT_LOG</span> is not defined then the rule <span class="code">&quot;* -&gt; notice&quot;</span> is
used instead.<br/></p></div><p><br/>
</p><h6 id="6_Loggingfunctions">Logging functions <a class="backref" href="#6_Loggingfunctions">&#182;</a></h6><p><br/>
</p><div class="code" id="VALlog"><p><span class="keyword">val</span> log : <span class="code type"><br/><span class="teletype">   </span>?exn:exn -&gt;<br/><span class="teletype">   </span>  ?section:<span><a href=".././api/Lwt_log#TYPEsection">section</a></span> -&gt;<br/><span class="teletype">   </span>  ?logger:<span><a href=".././api/Lwt_log#TYPElogger">logger</a></span> -&gt; level:<span><a href=".././api/Lwt_log#TYPElevel">level</a></span> -&gt; string -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p><span class="code">log ?section ?logger ~level message</span> logs a message.<br/>
</p><p><span class="code">section</span> defaults to <span><a href=".././api/Lwt_log.Section#VALmain">Lwt_log.Section.main</a></span>. If <span class="code">logger</span> is not
specified, then the default one is used instead (see
<span><a href=".././api/Lwt_log#VALdefault">Lwt_log.default</a></span>).<br/>
</p><p>If <span class="code">exn</span> is provided, then its string representation
(= <span class="code">Printexc.to_string exn</span>) will be append to the message, and if
possible the backtrace will also be logged.<br/></p></div><div class="code" id="VALlog_f"><p><span class="keyword">val</span> log_f : <span class="code type"><br/><span class="teletype">   </span>?exn:exn -&gt;<br/><span class="teletype">   </span>  ?section:<span><a href=".././api/Lwt_log#TYPEsection">section</a></span> -&gt;<br/><span class="teletype">   </span>  ?logger:<span><a href=".././api/Lwt_log#TYPElogger">logger</a></span> -&gt;<br/><span class="teletype">   </span>  level:<span><a href=".././api/Lwt_log#TYPElevel">level</a></span> -&gt;<br/><span class="teletype">   </span>  ('a, unit, string, unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span>) Pervasives.format4 -&gt; 'a</span></p></div><div class="info"><p><span class="code">log_f</span> is the same as <span class="code">log</span> except that it takes a format
string<br/></p></div><p><br/>
The following functions are the same as <span><a href=".././api/Lwt_log#VALlog">Lwt_log.log</a></span> except that their
name determines which level is used.<br/>
</p><p>For example <span class="code">info msg</span> is the same as <span class="code">log ~level:Info msg</span>.<br/>
</p><div class="code" id="VALdebug"><p><span class="keyword">val</span> debug : <span class="code type"><br/><span class="teletype">   </span>?exn:exn -&gt;<br/><span class="teletype">   </span>  ?section:<span><a href=".././api/Lwt_log#TYPEsection">section</a></span> -&gt; ?logger:<span><a href=".././api/Lwt_log#TYPElogger">logger</a></span> -&gt; string -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="code" id="VALdebug_f"><p><span class="keyword">val</span> debug_f : <span class="code type"><br/><span class="teletype">   </span>?exn:exn -&gt;<br/><span class="teletype">   </span>  ?section:<span><a href=".././api/Lwt_log#TYPEsection">section</a></span> -&gt;<br/><span class="teletype">   </span>  ?logger:<span><a href=".././api/Lwt_log#TYPElogger">logger</a></span> -&gt;<br/><span class="teletype">   </span>  ('a, unit, string, unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span>) Pervasives.format4 -&gt; 'a</span></p></div><div class="code" id="VALinfo"><p><span class="keyword">val</span> info : <span class="code type"><br/><span class="teletype">   </span>?exn:exn -&gt;<br/><span class="teletype">   </span>  ?section:<span><a href=".././api/Lwt_log#TYPEsection">section</a></span> -&gt; ?logger:<span><a href=".././api/Lwt_log#TYPElogger">logger</a></span> -&gt; string -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="code" id="VALinfo_f"><p><span class="keyword">val</span> info_f : <span class="code type"><br/><span class="teletype">   </span>?exn:exn -&gt;<br/><span class="teletype">   </span>  ?section:<span><a href=".././api/Lwt_log#TYPEsection">section</a></span> -&gt;<br/><span class="teletype">   </span>  ?logger:<span><a href=".././api/Lwt_log#TYPElogger">logger</a></span> -&gt;<br/><span class="teletype">   </span>  ('a, unit, string, unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span>) Pervasives.format4 -&gt; 'a</span></p></div><div class="code" id="VALnotice"><p><span class="keyword">val</span> notice : <span class="code type"><br/><span class="teletype">   </span>?exn:exn -&gt;<br/><span class="teletype">   </span>  ?section:<span><a href=".././api/Lwt_log#TYPEsection">section</a></span> -&gt; ?logger:<span><a href=".././api/Lwt_log#TYPElogger">logger</a></span> -&gt; string -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="code" id="VALnotice_f"><p><span class="keyword">val</span> notice_f : <span class="code type"><br/><span class="teletype">   </span>?exn:exn -&gt;<br/><span class="teletype">   </span>  ?section:<span><a href=".././api/Lwt_log#TYPEsection">section</a></span> -&gt;<br/><span class="teletype">   </span>  ?logger:<span><a href=".././api/Lwt_log#TYPElogger">logger</a></span> -&gt;<br/><span class="teletype">   </span>  ('a, unit, string, unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span>) Pervasives.format4 -&gt; 'a</span></p></div><div class="code" id="VALwarning"><p><span class="keyword">val</span> warning : <span class="code type"><br/><span class="teletype">   </span>?exn:exn -&gt;<br/><span class="teletype">   </span>  ?section:<span><a href=".././api/Lwt_log#TYPEsection">section</a></span> -&gt; ?logger:<span><a href=".././api/Lwt_log#TYPElogger">logger</a></span> -&gt; string -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="code" id="VALwarning_f"><p><span class="keyword">val</span> warning_f : <span class="code type"><br/><span class="teletype">   </span>?exn:exn -&gt;<br/><span class="teletype">   </span>  ?section:<span><a href=".././api/Lwt_log#TYPEsection">section</a></span> -&gt;<br/><span class="teletype">   </span>  ?logger:<span><a href=".././api/Lwt_log#TYPElogger">logger</a></span> -&gt;<br/><span class="teletype">   </span>  ('a, unit, string, unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span>) Pervasives.format4 -&gt; 'a</span></p></div><div class="code" id="VALerror"><p><span class="keyword">val</span> error : <span class="code type"><br/><span class="teletype">   </span>?exn:exn -&gt;<br/><span class="teletype">   </span>  ?section:<span><a href=".././api/Lwt_log#TYPEsection">section</a></span> -&gt; ?logger:<span><a href=".././api/Lwt_log#TYPElogger">logger</a></span> -&gt; string -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="code" id="VALerror_f"><p><span class="keyword">val</span> error_f : <span class="code type"><br/><span class="teletype">   </span>?exn:exn -&gt;<br/><span class="teletype">   </span>  ?section:<span><a href=".././api/Lwt_log#TYPEsection">section</a></span> -&gt;<br/><span class="teletype">   </span>  ?logger:<span><a href=".././api/Lwt_log#TYPElogger">logger</a></span> -&gt;<br/><span class="teletype">   </span>  ('a, unit, string, unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span>) Pervasives.format4 -&gt; 'a</span></p></div><div class="code" id="VALfatal"><p><span class="keyword">val</span> fatal : <span class="code type"><br/><span class="teletype">   </span>?exn:exn -&gt;<br/><span class="teletype">   </span>  ?section:<span><a href=".././api/Lwt_log#TYPEsection">section</a></span> -&gt; ?logger:<span><a href=".././api/Lwt_log#TYPElogger">logger</a></span> -&gt; string -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="code" id="VALfatal_f"><p><span class="keyword">val</span> fatal_f : <span class="code type"><br/><span class="teletype">   </span>?exn:exn -&gt;<br/><span class="teletype">   </span>  ?section:<span><a href=".././api/Lwt_log#TYPEsection">section</a></span> -&gt;<br/><span class="teletype">   </span>  ?logger:<span><a href=".././api/Lwt_log#TYPElogger">logger</a></span> -&gt;<br/><span class="teletype">   </span>  ('a, unit, string, unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span>) Pervasives.format4 -&gt; 'a</span></p></div><div class="code"><p><span class="keyword">module</span> <span><a href=".././api/Lwt_log.Section">Section</a></span>: <span class="code">sig</span><span><a href=".././api/Lwt_log.Section">..</a></span><span class="code">end</span></p></div><div class="info"><p>Sections</p></div><p><br/>
</p><h6 id="6_Logtemplates">Log templates <a class="backref" href="#6_Logtemplates">&#182;</a></h6><p><br/>
</p><div class="code" id="TYPEtemplate"><p><span class="keyword">type</span> template = <span class="code type">string</span></p></div><div class="info"><p>A template is for generating log messages.<br/>
</p><p>It is a string which may contains variables of the form
<span class="code">$(var)</span>, where <span class="code">var</span> is one of:<br/>
</p><ul><li> <span class="code">date</span> which will be replaced with the current date
</li><li> <span class="code">milliseconds</span> which will be replaced by the fractionnal part
of the current unix time
</li><li> <span class="code">name</span> which will be replaced by the program name
</li><li> <span class="code">pid</span> which will be replaced by the pid of the program
</li><li> <span class="code">message</span> which will be replaced by the message emited
</li><li> <span class="code">level</span> which will be replaced by a string representation of
the level
</li><li> <span class="code">section</span> which will be replaced by the name of the
message's section
</li></ul><p>For example:* <span class="code">&quot;$(name): $(message)&quot;</span>
</p><ul><li> <span class="code">&quot;$(date) $(name)[$(pid)]: $(message)&quot;</span>
</li><li> <span class="code">&quot;$(date).$(milliseconds) $(name)[$(pid)]: $(message)&quot;</span>
</li></ul><p><br/></p></div><div class="code" id="VALrender"><p><span class="keyword">val</span> render : <span class="code type"><br/><span class="teletype">   </span>buffer:Buffer.t -&gt;<br/><span class="teletype">   </span>  template:<span><a href=".././api/Lwt_log#TYPEtemplate">template</a></span> -&gt;<br/><span class="teletype">   </span>  section:<span><a href=".././api/Lwt_log#TYPEsection">section</a></span> -&gt; level:<span><a href=".././api/Lwt_log#TYPElevel">level</a></span> -&gt; message:string -&gt; unit</span></p></div><div class="info"><p><span class="code">render ~buffer ~template ~section ~level ~message</span> instantiate
all variables of <span class="code">template</span>, and store the result in
<span class="code">buffer</span>.<br/></p></div><p><br/>
</p><h6 id="6_Loggers">Loggers <a class="backref" href="#6_Loggers">&#182;</a></h6><p><br/>
</p><div class="code" id="EXCEPTIONLogger_closed"><p><span class="keyword">exception</span> Logger_closed</p></div><div class="info"><p>Exception raised when trying to use a closed logger<br/></p></div><div class="code" id="VALmake"><p><span class="keyword">val</span> make : <span class="code type"><br/><span class="teletype">   </span>output:(<span><a href=".././api/Lwt_log#TYPEsection">section</a></span> -&gt; <span><a href=".././api/Lwt_log#TYPElevel">level</a></span> -&gt; string list -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span>) -&gt;<br/><span class="teletype">   </span>  close:(unit -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span>) -&gt; <span><a href=".././api/Lwt_log#TYPElogger">logger</a></span></span></p></div><div class="info"><p><span class="code">make ~output ~close</span> creates a new logger.<br/></p></div><div class="param_info"><p><span class="code code">output</span> : is used to write logs. It is a function which
receive a section, a level and a list lines that must
be logged together.</p></div><div class="param_info"><p><span class="code code">close</span> : is used to close the logger</p></div><div class="code" id="VALclose"><p><span class="keyword">val</span> close : <span class="code type"><span><a href=".././api/Lwt_log#TYPElogger">logger</a></span> -&gt; unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p>Close the given logger<br/></p></div><div class="code" id="VALdefault"><p><span class="keyword">val</span> default : <span class="code type"><span><a href=".././api/Lwt_log#TYPElogger">logger</a></span> Pervasives.ref</span></p></div><div class="info"><p>The default logger. It is used as default when no one is
specified. Initially, it sends messages to the standard output
for error messages.<br/></p></div><div class="code" id="VALbroadcast"><p><span class="keyword">val</span> broadcast : <span class="code type"><span><a href=".././api/Lwt_log#TYPElogger">logger</a></span> list -&gt; <span><a href=".././api/Lwt_log#TYPElogger">logger</a></span></span></p></div><div class="info"><p><span class="code">broadcast loggers</span> is a logger which send messages to all the
given loggers.<br/>
</p><p>Note: closing a broadcast logger does not close its
components.<br/></p></div><div class="code" id="VALdispatch"><p><span class="keyword">val</span> dispatch : <span class="code type">(<span><a href=".././api/Lwt_log#TYPEsection">section</a></span> -&gt; <span><a href=".././api/Lwt_log#TYPElevel">level</a></span> -&gt; <span><a href=".././api/Lwt_log#TYPElogger">logger</a></span>) -&gt; <span><a href=".././api/Lwt_log#TYPElogger">logger</a></span></span></p></div><div class="info"><p><span class="code">dispatch f</span> is a logger which dispatch logging instructions to
different logger according to their level and/or section.<br/>
</p><p>Here is an example:<br/>
</p><p>
</p><pre>        let access_logger = Lwt_log.file &quot;access.log&quot;
        and error_logger = Lwt_log.file &quot;error.log&quot; in

        Lwt_log.dispatch
          (fun section level -&gt;
            match Lwt_log.Section.name section, level with
              | &quot;access&quot;, _ -&gt; access_logger
              | _, Lwt_log.Error -&gt; error_logger)
      
</pre><p><br/></p></div><p><br/>
</p><h6 id="6_Predefinedloggers">Predefined loggers <a class="backref" href="#6_Predefinedloggers">&#182;</a></h6><p><br/>
</p><div class="code" id="VALnull"><p><span class="keyword">val</span> null : <span class="code type"><span><a href=".././api/Lwt_log#TYPElogger">logger</a></span></span></p></div><div class="info"><p>Logger which drops everything<br/></p></div><div class="code" id="TYPEsyslog_facility"><p><span class="keyword">type</span> syslog_facility = <span class="code type"><br/><span class="teletype">   </span>[ `Auth<br/><span class="teletype">   </span>  | `Authpriv<br/><span class="teletype">   </span>  | `Console<br/><span class="teletype">   </span>  | `Cron<br/><span class="teletype">   </span>  | `Daemon<br/><span class="teletype">   </span>  | `FTP<br/><span class="teletype">   </span>  | `Kernel<br/><span class="teletype">   </span>  | `LPR<br/><span class="teletype">   </span>  | `Local0<br/><span class="teletype">   </span>  | `Local1<br/><span class="teletype">   </span>  | `Local2<br/><span class="teletype">   </span>  | `Local3<br/><span class="teletype">   </span>  | `Local4<br/><span class="teletype">   </span>  | `Local5<br/><span class="teletype">   </span>  | `Local6<br/><span class="teletype">   </span>  | `Local7<br/><span class="teletype">   </span>  | `Mail<br/><span class="teletype">   </span>  | `NTP<br/><span class="teletype">   </span>  | `News<br/><span class="teletype">   </span>  | `Security<br/><span class="teletype">   </span>  | `Syslog<br/><span class="teletype">   </span>  | `UUCP<br/><span class="teletype">   </span>  | `User ]</span></p></div><div class="info"><p>Syslog facility. Look at the SYSLOG(3) man page for a description
of syslog facilities<br/></p></div><div class="code" id="VALsyslog"><p><span class="keyword">val</span> syslog : <span class="code type"><br/><span class="teletype">   </span>?template:<span><a href=".././api/Lwt_log#TYPEtemplate">template</a></span> -&gt;<br/><span class="teletype">   </span>  ?paths:string list -&gt;<br/><span class="teletype">   </span>  facility:<span><a href=".././api/Lwt_log#TYPEsyslog_facility">syslog_facility</a></span> -&gt; unit -&gt; <span><a href=".././api/Lwt_log#TYPElogger">logger</a></span></span></p></div><div class="info"><p><span class="code">syslog ?template ?paths ~facility ()</span> creates an logger
which send message to the system logger.<br/></p></div><div class="param_info"><p><span class="code code">template</span> : defaults to <span class="code">&quot;$(date) $(name)[$(pid)]: $(section): $(message)&quot;</span></p></div><div class="param_info"><p><span class="code code">paths</span> : is a list of path to try for the syslogd socket. It
default to <span class="code">[&quot;/dev/log&quot;; &quot;/var/run/log&quot;]</span>.</p></div><div class="code" id="VALfile"><p><span class="keyword">val</span> file : <span class="code type"><br/><span class="teletype">   </span>?template:<span><a href=".././api/Lwt_log#TYPEtemplate">template</a></span> -&gt;<br/><span class="teletype">   </span>  ?mode:[ `Append | `Truncate ] -&gt;<br/><span class="teletype">   </span>  ?perm:Unix.file_perm -&gt; file_name:string -&gt; unit -&gt; <span><a href=".././api/Lwt_log#TYPElogger">logger</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></p></div><div class="info"><p><span class="code">desf_file ?template ?mode ?perm ~file_name ()</span> creates an
logger which will write messages to <span class="code">file_name</span>.<br/>
</p><ul><li> if <span class="code">mode = `Truncate</span> then the file is truncated and previous
contents will be lost.
</li></ul><ul><li> if <span class="code">mode = `Append</span>, new messages will be appended at the end
of the file
</li></ul><p><br/></p></div><div class="param_info"><p><span class="code code">template</span> : defaults to <span class="code">&quot;$(date): $(section): $(message)&quot;</span></p></div><div class="param_info"><p><span class="code code">mode</span> : defaults to <span class="code">`Append</span></p></div><div class="code" id="VALchannel"><p><span class="keyword">val</span> channel : <span class="code type"><br/><span class="teletype">   </span>?template:<span><a href=".././api/Lwt_log#TYPEtemplate">template</a></span> -&gt;<br/><span class="teletype">   </span>  close_mode:[ `Close | `Keep ] -&gt;<br/><span class="teletype">   </span>  channel:<span><a href=".././api/Lwt_io#TYPEoutput_channel">Lwt_io.output_channel</a></span> -&gt; unit -&gt; <span><a href=".././api/Lwt_log#TYPElogger">logger</a></span></span></p></div><div class="info"><p><span class="code">channel ?template ~close_mode ~channel ()</span> creates a logger
from a channel.<br/>
</p><p>If <span class="code">close_mode = `Close</span> then <span class="code">channel</span> is closed when the
logger is closed, otherwise it is left open.<br/></p></div><div class="param_info"><p><span class="code code">template</span> : defaults to <span class="code">&quot;$(name): $(section): $(message)&quot;</span></p></div></article></div></div></body></html>
