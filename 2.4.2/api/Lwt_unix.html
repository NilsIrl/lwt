<html><head><title>Module Lwt_unix </title><meta charset="utf8"/><meta content="width=device-width, initial-scale=1" name="viewport"/><link rel="stylesheet" href="https://ocsigen.org/css/style.css"/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/themes/prism.min.css"/><script type="text/javascript" src="https://ocsigen.org/js/client.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-core.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-ocaml.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-clike.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-reason.min.js">
//<![CDATA[

//]]>
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.9.0/components/prism-javascript.min.js">
//<![CDATA[

//]]>
</script></head><body class="Lwt_unix lwt"><div class="project-page"><div class="page-header"><p class="logo-ocsigen"><a href=".././../../" class="ocsimore_phrasing_link"><img src=".././../../img/ocsigen-white.svg" alt="Ocsigen"/></a>
</p><p class="logo-subproject">Lwt</p><div class="mainmenu"><p class="mainmenu-home"><a href=".././../../" class="ocsimore_phrasing_link">Home</a></p><p class="mainmenu-doc"><a href=".././../../tuto/" class="ocsimore_phrasing_link">Doc</a></p><p><a href=".././../../eliom/" class="ocsimore_phrasing_link">Eliom</a></p><p><a href=".././../../js_of_ocaml/" class="ocsimore_phrasing_link">Js_of_ocaml</a></p><p class="mainmenu-current"><a href=".././../../lwt/" class="ocsimore_phrasing_link">Lwt</a></p><p><a href=".././../../tyxml/" class="ocsimore_phrasing_link">Tyxml</a></p><p><a href=".././../../ocsigen-start/" class="ocsimore_phrasing_link">Start</a></p></div><form id="googlesearch" action="https://google.com/search"><input name="q" id="gsearch-box" placeholder="Search using Google"/><label for="gsearch-box"><img src="/img/search.svg" alt="" id="gsearch-icon"/></label><input type="submit" id="gsearch-submit" onclick="document.getElementById('gsearch-box').value += ' site:ocsigen.org';"/></form><aside class="how-drawer"><input id="how-drawer-toggle" type="checkbox"/><label for="how-drawer-toggle" id="how-drawer-label"><span class="how-drawer-icon"></span></label><nav class="how-drawer-content"><ul class="drawermainmenu"><li class="drawermainmenu-home"><a href=".././../../" class="ocsimore_phrasing_link">Home</a>
</li><li class="drawermainmenu-doc"><a href=".././../../tuto/" class="ocsimore_phrasing_link">Doc</a>
</li><li class="drawermainmenu-project"><a href=".././../../eliom/" class="ocsimore_phrasing_link">Eliom</a>
</li><li class="drawermainmenu-project"><a href=".././../../js_of_ocaml/" class="ocsimore_phrasing_link">Js_of_ocaml</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigenserver/" class="ocsimore_phrasing_link">Server</a>
</li><li class="drawermainmenu-project"><a href=".././../../lwt/" class="ocsimore_phrasing_link">Lwt</a>
</li><li class="drawermainmenu-project"><a href=".././../../tyxml/" class="ocsimore_phrasing_link">Tyxml</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigen-toolkit/" class="ocsimore_phrasing_link">Toolkit</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsigen-start/" class="ocsimore_phrasing_link">Start</a>
</li><li class="drawermainmenu-project"><a href=".././../../html_of_wiki/" class="ocsimore_phrasing_link">html_of_wiki</a>
</li><li class="drawermainmenu-project"><a href=".././../../deriving/" class="ocsimore_phrasing_link">deriving</a>
</li><li class="drawermainmenu-project"><a href=".././../../ocsimore/" class="ocsimore_phrasing_link">Ocsimore (<em>deprecated</em>)</a>
</li><li class="drawermainmenu-page"><a href=".././../../projects" class="ocsimore_phrasing_link">Other projects</a>
</li><li class="drawermainmenu-page"><a href=".././../../papers" class="ocsimore_phrasing_link">Research papers</a>
</li><li class="drawermainmenu-page"><a href=".././../../credits" class="ocsimore_phrasing_link">Who does Ocsigen?</a>
</li><li class="drawermainmenu-page"><a href=".././../../contributing" class="ocsimore_phrasing_link">Contributing</a>
</li><li class="drawermainmenu-page"><a href=".././../../blog" class="ocsimore_phrasing_link">Blog</a>
</li><li class="drawermainmenu-page"><a href=".././../../install" class="ocsimore_phrasing_link">Installation</a>
</li><li class="drawermainmenu-page"><a href="https://github.com/ocsigen" class="ocsimore_phrasing_link">Source code</a>
</li></ul><nav class="how-doctree"><h1>Lwt - API Reference</h1><h2>Core library</h2><h3><a href=".././api/Lwt" class="ocsimore_phrasing_link">Lwt</a></h3><h3><a href=".././api/Lwt_condition" class="ocsimore_phrasing_link">Lwt_condition</a></h3><h3><a href=".././api/Lwt_list" class="ocsimore_phrasing_link">Lwt_list</a></h3><h3><a href=".././api/Lwt_mutex" class="ocsimore_phrasing_link">Lwt_mutex</a></h3><h3><a href=".././api/Lwt_mvar" class="ocsimore_phrasing_link">Lwt_mvar</a></h3><h3><a href=".././api/Lwt_pool" class="ocsimore_phrasing_link">Lwt_pool</a></h3><h3><a href=".././api/Lwt_sequence" class="ocsimore_phrasing_link">Lwt_sequence</a></h3><h3><a href=".././api/Lwt_pqueue" class="ocsimore_phrasing_link">Lwt_pqueue</a></h3><h3><a href=".././api/Lwt_stream" class="ocsimore_phrasing_link">Lwt_stream</a></h3><h3><a href=".././api/Lwt_switch" class="ocsimore_phrasing_link">Lwt_switch</a></h3><h2>Unix bindings</h2><h3><a href=".././api/Lwt_daemon" class="ocsimore_phrasing_link">Lwt_daemon</a></h3><h3><a href=".././api/Lwt_gc" class="ocsimore_phrasing_link">Lwt_gc</a></h3><h3><a href=".././api/Lwt_io" class="ocsimore_phrasing_link">Lwt_io</a></h3><h3><a href=".././api/Lwt_log" class="ocsimore_phrasing_link">Lwt_log</a></h3><h3><a href=".././api/Lwt_main" class="ocsimore_phrasing_link">Lwt_main</a></h3><h3><a href=".././api/Lwt_engine" class="ocsimore_phrasing_link">Lwt_engine</a></h3><h3><a href=".././api/Lwt_process" class="ocsimore_phrasing_link">Lwt_process</a></h3><h3><a href=".././api/Lwt_throttle" class="ocsimore_phrasing_link">Lwt_throttle</a></h3><h3><a href=".././api/Lwt_timeout" class="ocsimore_phrasing_link">Lwt_timeout</a></h3><h3><a href=".././api/Lwt_unix" class="ocsimore_phrasing_link">Lwt_unix</a></h3><h3><a href=".././api/Lwt_bytes" class="ocsimore_phrasing_link">Lwt_bytes</a></h3><h3><a href=".././api/Lwt_sys" class="ocsimore_phrasing_link">Lwt_sys</a></h3><h2>Reactive programming helpers</h2><h3><a href=".././api/Lwt_react" class="ocsimore_phrasing_link">Lwt_react</a></h3><h2>Syntax extensions</h2><h3><a href=".././api/Pa_lwt" class="ocsimore_phrasing_link">Pa_lwt</a></h3><h3><a href=".././api/Pa_lwt_log" class="ocsimore_phrasing_link">Pa_lwt_log</a></h3><h2>Terminal manipulation</h2><h3><a href=".././api/Lwt_read_line" class="ocsimore_phrasing_link">Lwt_read_line</a></h3><h3><a href=".././api/Lwt_term" class="ocsimore_phrasing_link">Lwt_term</a></h3><h3><a href=".././api/Lwt_text" class="ocsimore_phrasing_link">Lwt_text</a></h3><h2>Miscellaneous</h2><h3><a href=".././api/Lwt_glib" class="ocsimore_phrasing_link">Lwt_glib</a></h3><h3><a href=".././api/Lwt_lib" class="ocsimore_phrasing_link">Lwt_lib</a></h3><h3><a href=".././api/Lwt_preemptive" class="ocsimore_phrasing_link">Lwt_preemptive</a></h3><h3><a href=".././api/Lwt_ssl" class="ocsimore_phrasing_link">Lwt_ssl</a></h3><h2>Index</h2><h3> <span><a href=".././api/index_types">Index of types</a></span></h3><h3> <span><a href=".././api/index_exceptions">Index of exceptions</a></span></h3><h3> <span><a href=".././api/index_values">Index of values</a></span></h3><h3> <span><a href=".././api/index_attributes">Index of class attributes</a></span></h3><h3> <span><a href=".././api/index_methods">Index of class methods</a></span></h3><h3> <span><a href=".././api/index_classes">Index of classes</a></span></h3><h3> <span><a href=".././api/index_class_types">Index of class types</a></span></h3><h3> <span><a href=".././api/index_modules">Index of modules</a></span></h3><h3> <span><a href=".././api/index_module_types">Index of module types</a></span></h3></nav></nav></aside></div><p class="reasonwarning">Warning: Reason support is experimental.
We are looking for beta-tester and contributors.
</p><button id="reason">Switch to </button><div class="twocols"><nav class="leftcol">Version <select class="how-versions" onchange="location = this.value;"><option value=".././../1.0.0/api/Lwt_unix">1.0.0</option><option value=".././../1.1.0/api/Lwt_unix">1.1.0</option><option value=".././../2.0.0/api/Lwt_unix">2.0.0</option><option value=".././../2.1.0/api/Lwt_unix">2.1.0</option><option value=".././../2.1.1/api/Lwt_unix">2.1.1</option><option value=".././../2.2.0/api/Lwt_unix">2.2.0</option><option value=".././../2.2.1/api/Lwt_unix">2.2.1</option><option value=".././../2.3.0/api/Lwt_unix">2.3.0</option><option value=".././../2.3.1/api/Lwt_unix">2.3.1</option><option value=".././../2.3.2/api/Lwt_unix">2.3.2</option><option value=".././../2.4.0/api/Lwt_unix">2.4.0</option><option value=".././../2.4.1/api/Lwt_unix">2.4.1</option><option value=".././../2.4.2/api/Lwt_unix" selected="selected">2.4.2</option><option value=".././../2.4.3/api/Lwt_unix">2.4.3</option><option value=".././../2.4.7/api/Lwt_unix">2.4.7</option><option value=".././../2.4.8/api/Lwt_unix">2.4.8</option><option value=".././../2.5.0/api/Lwt_unix">2.5.0</option><option value=".././../2.5.1/api/Lwt_unix">2.5.1</option><option value=".././../2.5.2/api/Lwt_unix">2.5.2</option><option value=".././../2.6.0/api/Lwt_unix">2.6.0</option><option value=".././../2.7.0/api/Lwt_unix">2.7.0</option><option value=".././../2.7.1/api/Lwt_unix">2.7.1</option><option value=".././../3.0.0/api/Lwt_unix">3.0.0</option><option value=".././../3.1.0/api/Lwt_unix">3.1.0</option><option value=".././../3.2.1/api/Lwt_unix">3.2.1</option><option value=".././../3.3.0/api/Lwt_unix">3.3.0</option><option value=".././../4.0.0/api/Lwt_unix">4.0.0</option><option value=".././../4.0.1/api/Lwt_unix">4.0.1</option><option value=".././../4.1.0/api/Lwt_unix">4.1.0</option><option value=".././../4.2.0/api/Lwt_unix">4.2.0</option><option value=".././../4.2.1/api/Lwt_unix">4.2.1</option><option value=".././../4.3.0/api/Lwt_unix">4.3.0</option><option value=".././../4.3.1/api/Lwt_unix">4.3.1</option><option value=".././../4.4.0/api/Lwt_unix">4.4.0</option><option value=".././../4.5.0/api/Lwt_unix">4.5.0</option><option value=".././../5.0.0/api/Lwt_unix">5.0.0</option><option value=".././../5.0.1/api/Lwt_unix">5.0.1</option><option value=".././../5.1.0/api/Lwt_unix">5.1.0</option><option value=".././../5.1.1/api/Lwt_unix">5.1.1</option><option value=".././../5.1.2/api/Lwt_unix">5.1.2</option><option value=".././../5.2.0/api/Lwt_unix">5.2.0</option><option value=".././../5.3.0/api/Lwt_unix">5.3.0</option><option value=".././../5.4.0/api/Lwt_unix">5.4.0</option><option value=".././../5.4.1/api/Lwt_unix">5.4.1</option><option value=".././../5.4.2/api/Lwt_unix">5.4.2</option><option value=".././../5.5.0/api/Lwt_unix">5.5.0</option><option value=".././../dev/api/Lwt_unix">dev</option></select><nav class="how-doctree"><h1>Lwt - API Reference</h1><h2>Core library</h2><h3><a href=".././api/Lwt" class="ocsimore_phrasing_link">Lwt</a></h3><h3><a href=".././api/Lwt_condition" class="ocsimore_phrasing_link">Lwt_condition</a></h3><h3><a href=".././api/Lwt_list" class="ocsimore_phrasing_link">Lwt_list</a></h3><h3><a href=".././api/Lwt_mutex" class="ocsimore_phrasing_link">Lwt_mutex</a></h3><h3><a href=".././api/Lwt_mvar" class="ocsimore_phrasing_link">Lwt_mvar</a></h3><h3><a href=".././api/Lwt_pool" class="ocsimore_phrasing_link">Lwt_pool</a></h3><h3><a href=".././api/Lwt_sequence" class="ocsimore_phrasing_link">Lwt_sequence</a></h3><h3><a href=".././api/Lwt_pqueue" class="ocsimore_phrasing_link">Lwt_pqueue</a></h3><h3><a href=".././api/Lwt_stream" class="ocsimore_phrasing_link">Lwt_stream</a></h3><h3><a href=".././api/Lwt_switch" class="ocsimore_phrasing_link">Lwt_switch</a></h3><h2>Unix bindings</h2><h3><a href=".././api/Lwt_daemon" class="ocsimore_phrasing_link">Lwt_daemon</a></h3><h3><a href=".././api/Lwt_gc" class="ocsimore_phrasing_link">Lwt_gc</a></h3><h3><a href=".././api/Lwt_io" class="ocsimore_phrasing_link">Lwt_io</a></h3><h3><a href=".././api/Lwt_log" class="ocsimore_phrasing_link">Lwt_log</a></h3><h3><a href=".././api/Lwt_main" class="ocsimore_phrasing_link">Lwt_main</a></h3><h3><a href=".././api/Lwt_engine" class="ocsimore_phrasing_link">Lwt_engine</a></h3><h3><a href=".././api/Lwt_process" class="ocsimore_phrasing_link">Lwt_process</a></h3><h3><a href=".././api/Lwt_throttle" class="ocsimore_phrasing_link">Lwt_throttle</a></h3><h3><a href=".././api/Lwt_timeout" class="ocsimore_phrasing_link">Lwt_timeout</a></h3><h3><a href=".././api/Lwt_unix" class="ocsimore_phrasing_link">Lwt_unix</a></h3><h3><a href=".././api/Lwt_bytes" class="ocsimore_phrasing_link">Lwt_bytes</a></h3><h3><a href=".././api/Lwt_sys" class="ocsimore_phrasing_link">Lwt_sys</a></h3><h2>Reactive programming helpers</h2><h3><a href=".././api/Lwt_react" class="ocsimore_phrasing_link">Lwt_react</a></h3><h2>Syntax extensions</h2><h3><a href=".././api/Pa_lwt" class="ocsimore_phrasing_link">Pa_lwt</a></h3><h3><a href=".././api/Pa_lwt_log" class="ocsimore_phrasing_link">Pa_lwt_log</a></h3><h2>Terminal manipulation</h2><h3><a href=".././api/Lwt_read_line" class="ocsimore_phrasing_link">Lwt_read_line</a></h3><h3><a href=".././api/Lwt_term" class="ocsimore_phrasing_link">Lwt_term</a></h3><h3><a href=".././api/Lwt_text" class="ocsimore_phrasing_link">Lwt_text</a></h3><h2>Miscellaneous</h2><h3><a href=".././api/Lwt_glib" class="ocsimore_phrasing_link">Lwt_glib</a></h3><h3><a href=".././api/Lwt_lib" class="ocsimore_phrasing_link">Lwt_lib</a></h3><h3><a href=".././api/Lwt_preemptive" class="ocsimore_phrasing_link">Lwt_preemptive</a></h3><h3><a href=".././api/Lwt_ssl" class="ocsimore_phrasing_link">Lwt_ssl</a></h3><h2>Index</h2><h3> <span><a href=".././api/index_types">Index of types</a></span></h3><h3> <span><a href=".././api/index_exceptions">Index of exceptions</a></span></h3><h3> <span><a href=".././api/index_values">Index of values</a></span></h3><h3> <span><a href=".././api/index_attributes">Index of class attributes</a></span></h3><h3> <span><a href=".././api/index_methods">Index of class methods</a></span></h3><h3> <span><a href=".././api/index_classes">Index of classes</a></span></h3><h3> <span><a href=".././api/index_class_types">Index of class types</a></span></h3><h3> <span><a href=".././api/index_modules">Index of modules</a></span></h3><h3> <span><a href=".././api/index_module_types">Index of module types</a></span></h3></nav></nav><article class="rightcol"><h1>Module <span><a href=".././api/Lwt_unix">Lwt_unix</a></span> </h1><pre class="ocsforge_color odocwiki_code"><span class="ocsforge_color_keyword">module</span> <span class="ocsforge_color_uid"><span class="ocsforge_color_uid">Lwt_unix</span></span> <span class="ocsforge_color_delimiter">:</span> <span class="ocsforge_color_keyword">sig</span><span><a href=".././api/Lwt_unix">..</a></span><span class="ocsforge_color_keyword">end</span></pre><p>Cooperative system calls
</p><hr/><p>This modules redefine system calls, as in the <span class="odocwiki_inlinecode">Unix</span> module of the
standard library, but mapped into cooperative ones, which will not
block the program, letting other threads run.
</p><p>The semantic of all operations is the following: if the action
(for example reading from a <strong>file descriptor</strong>) can be performed
immediatly, it is done and returns immediatly, otherwise it
returns a sleeping threads which is waked up when the operation
completes.
</p><p>Most operations on sockets and pipes (on Windows it is only
sockets) are <strong>cancelable</strong>, this means that you can cancel them
with <span><a href=".././api/Lwt#VALcancel">Lwt.cancel</a></span>. For example if you want to read something from
a <strong>file descriptor</strong> with a timeout, you can cancel the action
after the timeout and the reading will not be performed if not
already done.
</p><p>More precisely, assuming that you have two sockets <span class="odocwiki_inlinecode">sock1</span> and
<span class="odocwiki_inlinecode">sock2</span> and you want to read something from <span class="odocwiki_inlinecode">sock1</span> or exclusively
from <span class="odocwiki_inlinecode">sock2</span>, and fail with an exception if a timeout of 1 second
expires, without reading anything from <span class="odocwiki_inlinecode">sock1</span> and <span class="odocwiki_inlinecode">sock2</span>, even
if they become readable in the future.
</p><p>Then you can do:
</p><p>
</p><pre class=""><code class="language-ocaml translatable">Lwt.pick [Lwt_unix.timeout 1.0; read sock1 buf1 ofs1 len1; read sock2 buf2 ofs2 len2]</code></pre><p>In this case it is guaranteed that exactly one of the three
operations will completes, and other will just be cancelled.
</p><pre class="ocsforge_color odocwiki_code" id="VALhandle_unix_error"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">handle_unix_error</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_delimiter">(</span>'a <span class="ocsforge_color_delimiter">-&gt;</span> 'b <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span class="ocsforge_color_delimiter">-&gt;</span> 'b <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Same as <span class="odocwiki_inlinecode">Unix.handle_unix_error</span> but catches lwt-level
exceptions</p></div><h6 id="6_Configuration">Configuration <a class="backref" href="#6_Configuration">&#182;</a></h6><pre class="ocsforge_color odocwiki_code" id="TYPEasync_method"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">async_method</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Async_none</span></span><span class="odocwiki_comments"><span class="odocwiki_comments_open">(*</span> <span>System calls are made synchronously, and may block the
entire program.</span><span class="odocwiki_comments_close"> *)</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Async_detach</span></span><span class="odocwiki_comments"><span class="odocwiki_comments_open">(*</span> <span>System calls are made in another system thread, thus without
blocking other Lwt threads. The drawback is that it may
degrade performances in some cases.
This is the default.</span><span class="odocwiki_comments_close"> *)</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Async_switch</span></span><span class="odocwiki_comments"><span class="odocwiki_comments_open">(*</span> <span>System calls are made in the main thread, and if one blocks
the execution continue in another system thread. This method
is the most efficint, also you will get better performances
if you force all threads to run on the same cpu. On linux
this can be done by using the command <span class="odocwiki_inlinecode">taskset</span>.
Note that this method is still experimental.</span><span class="odocwiki_comments_close"> *)</span></span></span></span></pre><div class="odocwiki_info"><p>For system calls that cannot be made asynchronously, Lwt uses one
of the following method:</p></div><pre class="ocsforge_color odocwiki_code" id="VALdefault_async_method"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">default_async_method</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEasync_method">async_method</a></span></span></pre><div class="odocwiki_info"><p>Returns the default async method.
</p><p>This can be initialized using the environment variable
<span class="odocwiki_inlinecode">&quot;LWT_ASYNC_METHOD&quot;</span> with possible values <span class="odocwiki_inlinecode">&quot;none&quot;</span>,
<span class="odocwiki_inlinecode">&quot;detach&quot;</span> and <span class="odocwiki_inlinecode">&quot;switch&quot;</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_default_async_method"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_default_async_method</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEasync_method">async_method</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Sets the default async method.</p></div><pre class="ocsforge_color odocwiki_code" id="VALasync_method"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">async_method</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEasync_method">async_method</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">async_method ()</span> returns the async method used in the current
thread.</p></div><pre class="ocsforge_color odocwiki_code" id="VALasync_method_key"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">async_method_key</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEasync_method">async_method</a></span> <span><a href=".././api/Lwt#TYPEkey">Lwt.key</a></span></span></pre><div class="odocwiki_info"><p>The key for storing the local async method.</p></div><pre class="ocsforge_color odocwiki_code" id="VALwith_async_none"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">with_async_none</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_delimiter">(</span>unit <span class="ocsforge_color_delimiter">-&gt;</span> 'a<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">with_async_none f</span> is a shorthand for:
</p><p>
</p><pre class=""><code class="language-ocaml translatable">Lwt.with_value async_method_key (Some Async_none) f</code></pre></div><pre class="ocsforge_color odocwiki_code" id="VALwith_async_detach"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">with_async_detach</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_delimiter">(</span>unit <span class="ocsforge_color_delimiter">-&gt;</span> 'a<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">with_async_none f</span> is a shorthand for:
</p><p>
</p><pre class=""><code class="language-ocaml translatable">Lwt.with_value async_method_key (Some Async_detach) f</code></pre></div><pre class="ocsforge_color odocwiki_code" id="VALwith_async_switch"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">with_async_switch</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_delimiter">(</span>unit <span class="ocsforge_color_delimiter">-&gt;</span> 'a<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">with_async_none f</span> is a shorthand for:
</p><p>
</p><pre class=""><code class="language-ocaml translatable">Lwt.with_value async_method_key (Some Async_switch) f</code></pre></div><h6 id="6_Sleeping">Sleeping <a class="backref" href="#6_Sleeping">&#182;</a></h6><pre class="ocsforge_color odocwiki_code" id="VALsleep"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">sleep</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">float <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">sleep d</span> is a threads which remain suspended for <span class="odocwiki_inlinecode">d</span> seconds
and then terminates.</p></div><pre class="ocsforge_color odocwiki_code" id="VALyield"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">yield</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">yield ()</span> is a threads which suspends itself and then resumes
as soon as possible and terminates.</p></div><pre class="ocsforge_color odocwiki_code" id="VALauto_yield"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">auto_yield</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">float <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">auto_yield timeout</span> returns a function <span class="odocwiki_inlinecode">f</span> which will yield
every <span class="odocwiki_inlinecode">timeout</span> seconds.</p></div><pre class="ocsforge_color odocwiki_code" id="EXCEPTIONTimeout"><span class="ocsforge_color_keyword">exception</span> <span class="odocwiki_name">Timeout</span></pre><div class="odocwiki_info"><p>Exception raised by timeout operations</p></div><pre class="ocsforge_color odocwiki_code" id="VALtimeout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">timeout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">float <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">timeout d</span> is a thread which remains suspended for <span class="odocwiki_inlinecode">d</span> seconds
then fails with <span><a href=".././api/Lwt_unix#EXCEPTIONTimeout">Lwt_unix.Timeout</a></span></p></div><pre class="ocsforge_color odocwiki_code" id="VALwith_timeout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">with_timeout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">float <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_delimiter">(</span>unit <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span><span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">with_timeout d f</span> is a short-hand for:
</p><p>
</p><pre class=""><code class="language-ocaml translatable">Lwt.pick [Lwt_unix.timeout d; f ()]</code></pre></div><h6 id="6_Operationonfiledescriptors">Operation on file-descriptors <a class="backref" href="#6_Operationonfiledescriptors">&#182;</a></h6><pre class="ocsforge_color odocwiki_code" id="TYPEfile_descr"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">file_descr</span></pre><div class="odocwiki_info"><p>The abstract type for <strong>file descriptor</strong>s. A Lwt <strong>file
descriptor</strong> is a pair of a unix <strong>file descriptor</strong> (of type
<span class="odocwiki_inlinecode">Unix.file_descr</span>) and a <strong>state</strong>.
</p><p>A <strong>file descriptor</strong> may be:
</p><ul><li> <strong>opened</strong>, in which case it is fully usable
</li><li> <strong>closed</strong> or <strong>aborted</strong>, in which case it is no longer
usable</li></ul></div><pre class="ocsforge_color odocwiki_code" id="TYPEstate"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">state</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Opened</span></span><span class="odocwiki_comments"><span class="odocwiki_comments_open">(*</span> <span>The <strong>file descriptor</strong> is opened</span><span class="odocwiki_comments_close"> *)</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Closed</span></span><span class="odocwiki_comments"><span class="odocwiki_comments_open">(*</span> <span>The <strong>file descriptor</strong> has been closed by <span><a href=".././api/Lwt_unix#VALclose">Lwt_unix.close</a></span>. It must
not be used for any operation.</span><span class="odocwiki_comments_close"> *)</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Aborted</span> <span class="ocsforge_color_keyword">of</span> <span class="odocwiki_type">exn</span></span><span class="odocwiki_comments"><span class="odocwiki_comments_open">(*</span> <span>The <strong>file descriptor</strong> has been aborted, the only operation
possible is <span><a href=".././api/Lwt_unix#VALclose">Lwt_unix.close</a></span>, all others will fail.</span><span class="odocwiki_comments_close"> *)</span></span></span></span></pre><div class="odocwiki_info"><p>State of a <strong>file descriptor</strong></p></div><pre class="ocsforge_color odocwiki_code" id="VALstate"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">state</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEstate">state</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">state fd</span> returns the state of <span class="odocwiki_inlinecode">fd</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALunix_file_descr"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">unix_file_descr</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">file_descr</span></span></pre><div class="odocwiki_info"><p>Returns the underlying unix <strong>file descriptor</strong>. It always
succeeds, even if the <strong>file descriptor</strong>'s state is not
<span class="odocwiki_inlinecode">Open</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALof_unix_file_descr"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">of_unix_file_descr</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?blocking:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">?set_flags:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">file_descr</span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span></span></pre><div class="odocwiki_info"><p>Creates a lwt <strong>file descriptor</strong> from a unix one.
</p><p><span class="odocwiki_inlinecode">blocking</span> is the blocking mode of the file-descriptor, and
describes how Lwt will use it. In non-blocking mode, read/write
on this file descriptor are made using non-blocking IO; in
blocking mode they are made using the current async method.  If
<span class="odocwiki_inlinecode">blocking</span> is not specified it is guessed according to the file
kind: socket and pipes are in non-blocking mode and others are
in blocking mode.
</p><p>If <span class="odocwiki_inlinecode">set_flags</span> is <span class="odocwiki_inlinecode">true</span> (the default) then the file flags are
modified according to the <span class="odocwiki_inlinecode">blocking</span> argument, otherwise they
are left unchanged.
</p><p>Note that the blocking mode is less efficient than the
non-blocking one, so it should be used only for file descriptors
that does not support asynchronous operations, such as regular
files, or for shared descriptors such as <span><a href=".././api/Lwt_unix#VALstdout">Lwt_unix.stdout</a></span>, <span><a href=".././api/Lwt_unix#VALstderr">Lwt_unix.stderr</a></span> or
<span><a href=".././api/Lwt_unix#VALstdin">Lwt_unix.stdin</a></span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALblocking"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">blocking</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> bool <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">blocking fd</span> returns whether <span class="odocwiki_inlinecode">fd</span> is used in blocking or
non-blocking mode.</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_blocking"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_blocking</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_label">?set_flags:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> bool <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">set_blocking fd b</span> puts <span class="odocwiki_inlinecode">fd</span> in blocking or non-blocking
mode. If <span class="odocwiki_inlinecode">set_flags</span> is <span class="odocwiki_inlinecode">true</span> (the default) then the file flags
are modified, otherwise the modification is only done at the
application level.</p></div><pre class="ocsforge_color odocwiki_code" id="VALabort"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">abort</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> exn <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">abort fd exn</span> makes all current and further uses of the file
descriptor fail with the given exception. This put the <strong>file
descriptor</strong> into the <span class="odocwiki_inlinecode">Aborted</span> state.
</p><p>If the <strong>file descriptor</strong> is closed, this does nothing, if it is
aborted, this replace the abort exception by <span class="odocwiki_inlinecode">exn</span>.
</p><p>Note that this only works for reading and writing operations on
file descriptors supporting non-blocking mode.</p></div><h6 id="6_Processhandling">Process handling <a class="backref" href="#6_Processhandling">&#182;</a></h6><pre class="ocsforge_color odocwiki_code" id="VALfork"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">fork</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> int</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">fork ()</span> does the same as <span class="odocwiki_inlinecode">Unix.fork</span>. You must use this
function instead of <span class="odocwiki_inlinecode">Unix.fork</span> when you want to use Lwt in the
child process.
</p><p>Notes:
</p><ul><li> in the child process all pending jobs are canceled,
</li><li> if you are going to use Lwt in the parent and the child, it is
a good idea to call <span><a href=".././api/Lwt_io#VALflush_all">Lwt_io.flush_all</a></span> before callling
<span><a href=".././api/Lwt_unix#VALfork">Lwt_unix.fork</a></span> to avoid double-flush.</li></ul></div><pre class="ocsforge_color odocwiki_code" id="TYPEprocess_status"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">process_status</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">process_status</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">WEXITED</span> <span class="ocsforge_color_keyword">of</span> <span class="odocwiki_type">int</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">WSIGNALED</span> <span class="ocsforge_color_keyword">of</span> <span class="odocwiki_type">int</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">WSTOPPED</span> <span class="ocsforge_color_keyword">of</span> <span class="odocwiki_type">int</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="TYPEwait_flag"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">wait_flag</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">wait_flag</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">WNOHANG</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">WUNTRACED</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALwait"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">wait</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_delimiter">(</span>int * <span><a href=".././api/Lwt_unix#TYPEprocess_status">process_status</a></span><span class="ocsforge_color_delimiter">)</span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.wait</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALwaitpid"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">waitpid</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span><a href=".././api/Lwt_unix#TYPEwait_flag">wait_flag</a></span> list <span class="ocsforge_color_delimiter">-&gt;</span><br/>  int <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_delimiter">(</span>int * <span><a href=".././api/Lwt_unix#TYPEprocess_status">process_status</a></span><span class="ocsforge_color_delimiter">)</span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.waitpid</span></p></div><pre class="ocsforge_color odocwiki_code" id="TYPEresource_usage"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">resource_usage</span> <span class="ocsforge_color_delimiter">=</span> <span class="ocsforge_color_delimiter">{</span>
<span class="odocwiki_record"><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">ru_utime:</span> <span class="odocwiki_type">float</span><span class="ocsforge_color_delimiter">;</span></span><span class="odocwiki_comments"><span class="odocwiki_comments_open">(*</span> <span>User time used</span><span class="odocwiki_comments_close"> *)</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">ru_stime:</span> <span class="odocwiki_type">float</span><span class="ocsforge_color_delimiter">;</span></span><span class="odocwiki_comments"><span class="odocwiki_comments_open">(*</span> <span>System time used</span><span class="odocwiki_comments_close"> *)</span></span></span></span><span class="ocsforge_color_delimiter">}</span></pre><div class="odocwiki_info"><p>Resource usages</p></div><pre class="ocsforge_color odocwiki_code" id="VALwait4"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">wait4</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span><a href=".././api/Lwt_unix#TYPEwait_flag">wait_flag</a></span> list <span class="ocsforge_color_delimiter">-&gt;</span><br/>  int <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_delimiter">(</span>int * <span><a href=".././api/Lwt_unix#TYPEprocess_status">process_status</a></span> * <span><a href=".././api/Lwt_unix#TYPEresource_usage">resource_usage</a></span><span class="ocsforge_color_delimiter">)</span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">wait4 flags pid</span> returns <span class="odocwiki_inlinecode">(pid, status, rusage)</span> where <span class="odocwiki_inlinecode">(pid,
status)</span> is the same result as <span class="odocwiki_inlinecode">Unix.waitpid flags pid</span>, and
<span class="odocwiki_inlinecode">rusage</span> contains accounting information about the child.
</p><p>On windows it will always returns <span class="odocwiki_inlinecode">{ utime = 0.0; stime = 0.0 }</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALwait_count"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">wait_count</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> int</span></pre><div class="odocwiki_info"><p>Returns the number of threads waiting for a child to
terminate.</p></div><pre class="ocsforge_color odocwiki_code" id="VALsystem"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">system</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEprocess_status">process_status</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Executes the given command, waits until it terminates, and
return its termination status. The string is interpreted by the
shell <span class="odocwiki_inlinecode">/bin/sh</span> on Unix and <span class="odocwiki_inlinecode">cmd.exe</span> on Windows. The result
<span class="odocwiki_inlinecode">WEXITED 127</span> indicates that the shell couldn't be executed.</p></div><h6 id="6_Basicfileinputoutput">Basic file input/output <a class="backref" href="#6_Basicfileinputoutput">&#182;</a></h6><pre class="ocsforge_color odocwiki_code" id="VALstdin"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">stdin</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span></span></pre><div class="odocwiki_info"><p>The standard <strong>file descriptor</strong> for input. This one is usually
a terminal is the program is started from a terminal.</p></div><pre class="ocsforge_color odocwiki_code" id="VALstdout"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">stdout</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span></span></pre><div class="odocwiki_info"><p>The standard <strong>file descriptor</strong> for output</p></div><pre class="ocsforge_color odocwiki_code" id="VALstderr"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">stderr</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span></span></pre><div class="odocwiki_info"><p>The standard <strong>file descriptor</strong> for printing error messages</p></div><pre class="ocsforge_color odocwiki_code" id="TYPEfile_perm"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">file_perm</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">file_perm</span></span></pre><pre class="ocsforge_color odocwiki_code" id="TYPEopen_flag"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">open_flag</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">open_flag</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">O_RDONLY</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">O_WRONLY</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">O_RDWR</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">O_NONBLOCK</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">O_APPEND</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">O_CREAT</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">O_TRUNC</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">O_EXCL</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">O_NOCTTY</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">O_DSYNC</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">O_SYNC</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">O_RSYNC</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALopenfile"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">openfile</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  string <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span><a href=".././api/Lwt_unix#TYPEopen_flag">open_flag</a></span> list <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span><a href=".././api/Lwt_unix#TYPEfile_perm">file_perm</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.openfile</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALclose"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">close</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Close a <strong>file descriptor</strong>. This close the underlying unix <strong>      file descriptor</strong> and set its state to <span class="odocwiki_inlinecode">Closed</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALread"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">read</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> int <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">read fd buf ofs len</span> has the same semantic as <span class="odocwiki_inlinecode">Unix.read</span>, but
is cooperative</p></div><pre class="ocsforge_color odocwiki_code" id="VALwrite"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">write</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> int <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">read fd buf ofs len</span> has the same semantic as <span class="odocwiki_inlinecode">Unix.write</span>, but
is cooperative</p></div><pre class="ocsforge_color odocwiki_code" id="VALreadable"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">readable</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> bool</span></pre><div class="odocwiki_info"><p>Returns whether the given file descriptor is currently
readable.</p></div><pre class="ocsforge_color odocwiki_code" id="VALwritable"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">writable</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> bool</span></pre><div class="odocwiki_info"><p>Returns whether the given file descriptor is currently
writable.</p></div><pre class="ocsforge_color odocwiki_code" id="VALwait_read"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">wait_read</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>waits (without blocking other threads) until there is something
to read on the file descriptor</p></div><pre class="ocsforge_color odocwiki_code" id="VALwait_write"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">wait_write</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>waits (without blocking other threads) until it is possible to
write on the file descriptor</p></div><h6 id="6_Seekingandtruncating">Seeking and truncating <a class="backref" href="#6_Seekingandtruncating">&#182;</a></h6><pre class="ocsforge_color odocwiki_code" id="TYPEseek_command"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">seek_command</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">seek_command</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SEEK_SET</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SEEK_CUR</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SEEK_END</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALlseek"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">lseek</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEseek_command">seek_command</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> int <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.lseek</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALtruncate"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">truncate</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.truncate</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALftruncate"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">ftruncate</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.ftruncate</span></p></div><h6 id="6_Syncing">Syncing <a class="backref" href="#6_Syncing">&#182;</a></h6><pre class="ocsforge_color odocwiki_code" id="VALfsync"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">fsync</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Synchronise all data and metadata of the file descriptor with
the disk. On Windows it uses <span class="odocwiki_inlinecode">FlushFileBuffers</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALfdatasync"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">fdatasync</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Synchronise all data (but not metadata) of the file descriptor
with the disk.
</p><p>Note that <span class="odocwiki_inlinecode">fdatasync</span> is not available on all platforms.</p></div><h6 id="6_Filestatus">File status <a class="backref" href="#6_Filestatus">&#182;</a></h6><pre class="ocsforge_color odocwiki_code" id="TYPEfile_kind"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">file_kind</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">file_kind</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">S_REG</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">S_DIR</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">S_CHR</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">S_BLK</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">S_LNK</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">S_FIFO</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">S_SOCK</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="TYPEstats"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">stats</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">stats</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="ocsforge_color_delimiter">{</span>
<span class="odocwiki_record"><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">st_dev:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">st_ino:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">st_kind:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_kind">file_kind</a></span></span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">st_perm:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_perm">file_perm</a></span></span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">st_nlink:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">st_uid:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">st_gid:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">st_rdev:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">st_size:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">st_atime:</span> <span class="odocwiki_type">float</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">st_mtime:</span> <span class="odocwiki_type">float</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">st_ctime:</span> <span class="odocwiki_type">float</span><span class="ocsforge_color_delimiter">;</span></span></span></span><span class="ocsforge_color_delimiter">}</span></pre><pre class="ocsforge_color odocwiki_code" id="VALstat"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">stat</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEstats">stats</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.stat</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALlstat"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">lstat</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEstats">stats</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.lstat</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALfstat"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">fstat</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEstats">stats</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.fstat</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALisatty"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">isatty</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> bool <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.isatty</span></p></div><h6 id="6_Fileoperationsonlargefiles">File operations on large files <a class="backref" href="#6_Fileoperationsonlargefiles">&#182;</a></h6><pre class="ocsforge_color odocwiki_code"><span class="ocsforge_color_keyword">module</span> <span><a href=".././api/Lwt_unix.LargeFile">LargeFile</a></span> <span class="ocsforge_color_delimiter">:</span> <span class="ocsforge_color_keyword">sig</span><span><a href=".././api/Lwt_unix.LargeFile">..</a></span><span class="ocsforge_color_keyword">end</span></pre><h6 id="6_Operationsonfilenames">Operations on file names <a class="backref" href="#6_Operationsonfilenames">&#182;</a></h6><pre class="ocsforge_color odocwiki_code" id="VALunlink"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">unlink</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.unlink</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALrename"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">rename</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.rename</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALlink"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">link</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.link</span></p></div><h6 id="6_Filepermissionsandownership">File permissions and ownership <a class="backref" href="#6_Filepermissionsandownership">&#182;</a></h6><pre class="ocsforge_color odocwiki_code" id="VALchmod"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">chmod</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEfile_perm">file_perm</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.chmod</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALfchmod"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">fchmod</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEfile_perm">file_perm</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.fchmod</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALchown"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">chown</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.chown</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALfchown"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">fchown</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.fchown</span></p></div><pre class="ocsforge_color odocwiki_code" id="TYPEaccess_permission"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">access_permission</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">access_permission</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">R_OK</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">W_OK</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">X_OK</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">F_OK</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALaccess"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">access</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEaccess_permission">access_permission</a></span> list <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.access</span></p></div><h6 id="6_Operationsonfiledescriptors">Operations on file descriptors <a class="backref" href="#6_Operationsonfiledescriptors">&#182;</a></h6><pre class="ocsforge_color odocwiki_code" id="VALdup"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">dup</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.dup</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALdup2"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">dup2</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.dup2</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALset_close_on_exec"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_close_on_exec</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.set_close_on_exec</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALclear_close_on_exec"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">clear_close_on_exec</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.clear_close_on_exec</span></p></div><h6 id="6_Directories">Directories <a class="backref" href="#6_Directories">&#182;</a></h6><pre class="ocsforge_color odocwiki_code" id="VALmkdir"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">mkdir</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEfile_perm">file_perm</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.mkdir</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALrmdir"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">rmdir</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.rmdir</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALchdir"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">chdir</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.chdir</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALchroot"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">chroot</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.chroot</span></p></div><pre class="ocsforge_color odocwiki_code" id="TYPEdir_handle"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">dir_handle</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">dir_handle</span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALopendir"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">opendir</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEdir_handle">dir_handle</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.opendir</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALreaddir"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">readdir</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEdir_handle">dir_handle</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> string <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.dir</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALreaddir_n"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">readdir_n</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEdir_handle">dir_handle</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> string array <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">readdir_n handle count</span> reads at most <span class="odocwiki_inlinecode">count</span> entry from the
given directory. It is more efficient than calling <span class="odocwiki_inlinecode">readdir</span>
<span class="odocwiki_inlinecode">count</span> times. If the length of the returned array is smaller
than <span class="odocwiki_inlinecode">count</span>, this means that the end of the directory has been
reached.</p></div><pre class="ocsforge_color odocwiki_code" id="VALrewinddir"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">rewinddir</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEdir_handle">dir_handle</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.rewinddir</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALclosedir"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">closedir</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEdir_handle">dir_handle</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.closedir</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALfiles_of_directory"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">files_of_directory</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> string <span><a href=".././api/Lwt_stream#TYPEt">Lwt_stream.t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">files_of_directory dir</span> returns the stream of all files of
<span class="odocwiki_inlinecode">dir</span>.</p></div><h6 id="6_Pipesandredirections">Pipes and redirections <a class="backref" href="#6_Pipesandredirections">&#182;</a></h6><pre class="ocsforge_color odocwiki_code" id="VALpipe"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">pipe</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> * <span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">pipe ()</span> creates pipe using <span class="odocwiki_inlinecode">Unix.pipe</span> and returns two lwt <strong>      file descriptor</strong>s created from unix <strong>file_descriptor</strong></p></div><pre class="ocsforge_color odocwiki_code" id="VALpipe_in"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">pipe_in</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> * <span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">file_descr</span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">pipe_in ()</span> is the same as <span><a href=".././api/Lwt_unix#VALpipe">Lwt_unix.pipe</a></span> but maps only the unix <strong>      file descriptor</strong> for reading into a lwt one. The second is not
put into non-blocking mode. You usually want to use this before
forking to receive data from the child process.</p></div><pre class="ocsforge_color odocwiki_code" id="VALpipe_out"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">pipe_out</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">file_descr</span> * <span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">pipe_out ()</span> is the inverse of <span><a href=".././api/Lwt_unix#VALpipe_in">Lwt_unix.pipe_in</a></span>. You usually want to
use this before forking to send data to the child process</p></div><pre class="ocsforge_color odocwiki_code" id="VALmkfifo"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">mkfifo</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEfile_perm">file_perm</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.mkfifo</span></p></div><h6 id="6_Symboliclinks">Symbolic links <a class="backref" href="#6_Symboliclinks">&#182;</a></h6><pre class="ocsforge_color odocwiki_code" id="VALsymlink"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">symlink</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.symlink</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALreadlink"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">readlink</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> string <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.readlink</span></p></div><h6 id="6_Locking">Locking <a class="backref" href="#6_Locking">&#182;</a></h6><pre class="ocsforge_color odocwiki_code" id="TYPElock_command"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">lock_command</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">lock_command</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">F_ULOCK</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">F_LOCK</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">F_TLOCK</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">F_TEST</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">F_RLOCK</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">F_TRLOCK</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALlockf"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">lockf</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPElock_command">lock_command</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.lockf</span></p></div><h6 id="6_Useridgroupid">User id, group id <a class="backref" href="#6_Useridgroupid">&#182;</a></h6><pre class="ocsforge_color odocwiki_code" id="TYPEpasswd_entry"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">passwd_entry</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">passwd_entry</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="ocsforge_color_delimiter">{</span>
<span class="odocwiki_record"><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">pw_name:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">pw_passwd:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">pw_uid:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">pw_gid:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">pw_gecos:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">pw_dir:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">pw_shell:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span></span><span class="ocsforge_color_delimiter">}</span></pre><pre class="ocsforge_color odocwiki_code" id="TYPEgroup_entry"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">group_entry</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">group_entry</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="ocsforge_color_delimiter">{</span>
<span class="odocwiki_record"><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">gr_name:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">gr_passwd:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">gr_gid:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">gr_mem:</span> <span class="odocwiki_type">string array</span><span class="ocsforge_color_delimiter">;</span></span></span></span><span class="ocsforge_color_delimiter">}</span></pre><pre class="ocsforge_color odocwiki_code" id="VALgetlogin"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">getlogin</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> string <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.getlogin</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALgetpwnam"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">getpwnam</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEpasswd_entry">passwd_entry</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.getpwnam</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALgetgrnam"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">getgrnam</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEgroup_entry">group_entry</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.getgrnam</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALgetpwuid"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">getpwuid</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">int <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEpasswd_entry">passwd_entry</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.getpwuid</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALgetgrgid"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">getgrgid</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">int <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEgroup_entry">group_entry</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.getgrgid</span></p></div><h6 id="6_Signals">Signals <a class="backref" href="#6_Signals">&#182;</a></h6><pre class="ocsforge_color odocwiki_code" id="TYPEsignal_handler_id"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">signal_handler_id</span></pre><div class="odocwiki_info"><p>Id of a signal handler, used to cancel it</p></div><pre class="ocsforge_color odocwiki_code" id="VALon_signal"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">on_signal</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">int <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_delimiter">(</span>int <span class="ocsforge_color_delimiter">-&gt;</span> unit<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEsignal_handler_id">signal_handler_id</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">on_signal signum f</span> calls <span class="odocwiki_inlinecode">f</span> each time the signal with numnber
<span class="odocwiki_inlinecode">signum</span> is received by the process. It returns a signal handler
identifier which can be used to stop monitoring <span class="odocwiki_inlinecode">signum</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALon_signal_full"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">on_signal_full</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_delimiter">(</span><span><a href=".././api/Lwt_unix#TYPEsignal_handler_id">signal_handler_id</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span><a href=".././api/Lwt_unix#TYPEsignal_handler_id">signal_handler_id</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">on_signal_full f</span> is the same as <span class="odocwiki_inlinecode">on_signal f</span> except that <span class="odocwiki_inlinecode">f</span>
also receive the signal handler identifier as argument so it can
disable it.</p></div><pre class="ocsforge_color odocwiki_code" id="VALdisable_signal_handler"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">disable_signal_handler</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEsignal_handler_id">signal_handler_id</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Stops receiving this signal</p></div><pre class="ocsforge_color odocwiki_code" id="VALsignal_count"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">signal_count</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> int</span></pre><div class="odocwiki_info"><p>Returns the number of registered signal handler.</p></div><pre class="ocsforge_color odocwiki_code" id="VALreinstall_signal_handler"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">reinstall_signal_handler</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">int <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">reinstall_signal_handler signum</span> if any signal handler is
registered for this signal with <span><a href=".././api/Lwt_unix#VALon_signal">Lwt_unix.on_signal</a></span>, it reinstall the
signal handler (with <span class="odocwiki_inlinecode">Sys.set_signal</span>). This is usefull in case
another part of the program install another signal handler.</p></div><h6 id="6_Sockets">Sockets <a class="backref" href="#6_Sockets">&#182;</a></h6><pre class="ocsforge_color odocwiki_code" id="TYPEinet_addr"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">inet_addr</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">inet_addr</span></span></pre><pre class="ocsforge_color odocwiki_code" id="TYPEsocket_domain"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">socket_domain</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">socket_domain</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">PF_UNIX</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">PF_INET</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">PF_INET6</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="TYPEsocket_type"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">socket_type</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">socket_type</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SOCK_STREAM</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SOCK_DGRAM</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SOCK_RAW</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SOCK_SEQPACKET</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="TYPEsockaddr"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">sockaddr</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">sockaddr</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">ADDR_UNIX</span> <span class="ocsforge_color_keyword">of</span> <span class="odocwiki_type">string</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">ADDR_INET</span> <span class="ocsforge_color_keyword">of</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEinet_addr">inet_addr</a></span> * int</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALsocket"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">socket</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span><a href=".././api/Lwt_unix#TYPEsocket_domain">socket_domain</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span><a href=".././api/Lwt_unix#TYPEsocket_type">socket_type</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">socket domain type proto</span> is the same as <span class="odocwiki_inlinecode">Unix.socket</span> but maps
the result into a lwt <strong>file descriptor</strong></p></div><pre class="ocsforge_color odocwiki_code" id="VALsocketpair"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">socketpair</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span><a href=".././api/Lwt_unix#TYPEsocket_domain">socket_domain</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span><a href=".././api/Lwt_unix#TYPEsocket_type">socket_type</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  int <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> * <span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.socketpair</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALbind"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">bind</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEsockaddr">sockaddr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.bind</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALlisten"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">listen</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.listen</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALaccept"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">accept</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_delimiter">(</span><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> * <span><a href=".././api/Lwt_unix#TYPEsockaddr">sockaddr</a></span><span class="ocsforge_color_delimiter">)</span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.accept</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALaccept_n"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">accept_n</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_delimiter">(</span><span class="ocsforge_color_delimiter">(</span><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> * <span><a href=".././api/Lwt_unix#TYPEsockaddr">sockaddr</a></span><span class="ocsforge_color_delimiter">)</span> list * exn option<span class="ocsforge_color_delimiter">)</span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">accept_n fd count</span> accepts up to <span class="odocwiki_inlinecode">count</span> connection in one time.
</p><ul><li> if no connection is available right now, it returns a sleeping
thread
</li></ul><ul><li> if more that 1 and less than <span class="odocwiki_inlinecode">count</span> are available, it returns
all of them
</li></ul><ul><li> if more that <span class="odocwiki_inlinecode">count</span> are available, it returns the next
<span class="odocwiki_inlinecode">count</span> of them
</li></ul><ul><li> if an error happen, it returns the connections that have been
successfully accepted so far and the error
</li></ul><p><span class="odocwiki_inlinecode">accept_n</span> has the advantage of improving performances. If you
want a more detailed description, you can have a look at:
</p><p><a href="http://portal.acm.org/citation.cfm?id=1247435" class="ocsimore_phrasing_link">Acceptable strategies for improving web server performance</a></p></div><pre class="ocsforge_color odocwiki_code" id="VALconnect"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">connect</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEsockaddr">sockaddr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.connect</span></p></div><pre class="ocsforge_color odocwiki_code" id="TYPEshutdown_command"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">shutdown_command</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">shutdown_command</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SHUTDOWN_RECEIVE</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SHUTDOWN_SEND</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SHUTDOWN_ALL</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALshutdown"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">shutdown</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEshutdown_command">shutdown_command</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.shutdown</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALgetsockname"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">getsockname</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEsockaddr">sockaddr</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.getsockname</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALgetpeername"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">getpeername</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEsockaddr">sockaddr</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.getpeername</span></p></div><pre class="ocsforge_color odocwiki_code" id="TYPEmsg_flag"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">msg_flag</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">msg_flag</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">MSG_OOB</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">MSG_DONTROUTE</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">MSG_PEEK</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALrecv"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">recv</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  string <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEmsg_flag">msg_flag</a></span> list <span class="ocsforge_color_delimiter">-&gt;</span> int <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.recv</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALrecvfrom"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">recvfrom</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  string <span class="ocsforge_color_delimiter">-&gt;</span><br/>  int <span class="ocsforge_color_delimiter">-&gt;</span><br/>  int <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEmsg_flag">msg_flag</a></span> list <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_delimiter">(</span>int * <span><a href=".././api/Lwt_unix#TYPEsockaddr">sockaddr</a></span><span class="ocsforge_color_delimiter">)</span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.recvfrom</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALsend"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">send</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  string <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEmsg_flag">msg_flag</a></span> list <span class="ocsforge_color_delimiter">-&gt;</span> int <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.send</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALsendto"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">sendto</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  string <span class="ocsforge_color_delimiter">-&gt;</span><br/>  int <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEmsg_flag">msg_flag</a></span> list <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEsockaddr">sockaddr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> int <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.sendto</span></p></div><pre class="ocsforge_color odocwiki_code" id="TYPEio_vector"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">io_vector</span> <span class="ocsforge_color_delimiter">=</span> <span class="ocsforge_color_delimiter">{</span>
<span class="odocwiki_record"><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">iov_buffer:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">iov_offset:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">iov_length:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span></span><span class="ocsforge_color_delimiter">}</span></pre><div class="odocwiki_info"><p>An io-vector. Used by <span><a href=".././api/Lwt_unix#VALrecv_msg">Lwt_unix.recv_msg</a></span> and <span><a href=".././api/Lwt_unix#VALsend_msg">Lwt_unix.send_msg</a></span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALio_vector"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">io_vector</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_label">buffer:</span>string <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">offset:</span>int <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_label">length:</span>int <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEio_vector">io_vector</a></span></span></pre><div class="odocwiki_info"><p>Creates an io-vector</p></div><pre class="ocsforge_color odocwiki_code" id="VALrecv_msg"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">recv_msg</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">socket:</span><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">io_vectors:</span><span><a href=".././api/Lwt_unix#TYPEio_vector">io_vector</a></span> list <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_delimiter">(</span>int * <span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">file_descr</span> list<span class="ocsforge_color_delimiter">)</span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">recv_msg ~socket ~io_vectors</span> receives data into a list of
io-vectors, plus any file-descriptors that may accompany the
message.
</p><p>This call is not available on windows.</p></div><pre class="ocsforge_color odocwiki_code" id="VALsend_msg"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">send_msg</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">socket:</span><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">io_vectors:</span><span><a href=".././api/Lwt_unix#TYPEio_vector">io_vector</a></span> list <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">fds:</span><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">file_descr</span> list <span class="ocsforge_color_delimiter">-&gt;</span> int <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">send_msg ~socket ~io_vectors ~fds</span> sends data from a list of
io-vectors, accompanied with a list of file-descriptor. If
fd-passing is not possible on the current system and <span class="odocwiki_inlinecode">fds</span> is
not empty, it raises <span class="odocwiki_inlinecode">Lwt_sys.Not_available &quot;fd_passing&quot;</span>.
</p><p>This call is not available on windows.</p></div><pre class="ocsforge_color odocwiki_code" id="TYPEcredentials"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">credentials</span> <span class="ocsforge_color_delimiter">=</span> <span class="ocsforge_color_delimiter">{</span>
<span class="odocwiki_record"><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">cred_pid:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">cred_uid:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">cred_gid:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span></span><span class="ocsforge_color_delimiter">}</span></pre><pre class="ocsforge_color odocwiki_code" id="VALget_credentials"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">get_credentials</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEcredentials">credentials</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">get_credentials fd</span> returns credential informations from the
given socket. On some platforms, obtaining the peer pid is not
possible and it will be set to <span class="odocwiki_inlinecode">-1</span>. If obtaining credentials 
is not possible on the current system, it raises
<span class="odocwiki_inlinecode">Lwt_sys.Not_available &quot;get_credentials&quot;</span>.
</p><p>This call is not available on windows.</p></div><div class="h8"><p>Socket options</p></div><pre class="ocsforge_color odocwiki_code" id="TYPEsocket_bool_option"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">socket_bool_option</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">socket_bool_option</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SO_DEBUG</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SO_BROADCAST</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SO_REUSEADDR</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SO_KEEPALIVE</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SO_DONTROUTE</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SO_OOBINLINE</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SO_ACCEPTCONN</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">TCP_NODELAY</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">IPV6_ONLY</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="TYPEsocket_int_option"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">socket_int_option</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">socket_int_option</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SO_SNDBUF</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SO_RCVBUF</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SO_ERROR</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SO_TYPE</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SO_RCVLOWAT</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SO_SNDLOWAT</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="TYPEsocket_optint_option"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">socket_optint_option</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">socket_optint_option</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SO_LINGER</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="TYPEsocket_float_option"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">socket_float_option</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">socket_float_option</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SO_RCVTIMEO</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">SO_SNDTIMEO</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALgetsockopt"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">getsockopt</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEsocket_bool_option">socket_bool_option</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> bool</span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.getsockopt</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALsetsockopt"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">setsockopt</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEsocket_bool_option">socket_bool_option</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> bool <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.setsockopt</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALgetsockopt_int"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">getsockopt_int</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEsocket_int_option">socket_int_option</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> int</span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.getsockopt_int</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALsetsockopt_int"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">setsockopt_int</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEsocket_int_option">socket_int_option</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.setsockopt_int</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALgetsockopt_optint"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">getsockopt_optint</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEsocket_optint_option">socket_optint_option</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> int option</span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.getsockopt_optint</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALsetsockopt_optint"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">setsockopt_optint</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span><a href=".././api/Lwt_unix#TYPEsocket_optint_option">socket_optint_option</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> int option <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.setsockopt_optint</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALgetsockopt_float"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">getsockopt_float</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEsocket_float_option">socket_float_option</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> float</span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.getsockopt_float</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALsetsockopt_float"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">setsockopt_float</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEsocket_float_option">socket_float_option</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> float <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.setsockopt_float</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALgetsockopt_error"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">getsockopt_error</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">error</span> option</span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.getsockopt_error</span></p></div><h6 id="6_Hostandprotocoldatabases">Host and protocol databases <a class="backref" href="#6_Hostandprotocoldatabases">&#182;</a></h6><pre class="ocsforge_color odocwiki_code" id="TYPEhost_entry"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">host_entry</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">host_entry</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="ocsforge_color_delimiter">{</span>
<span class="odocwiki_record"><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">h_name:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">h_aliases:</span> <span class="odocwiki_type">string array</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">h_addrtype:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEsocket_domain">socket_domain</a></span></span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">h_addr_list:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEinet_addr">inet_addr</a></span> array</span><span class="ocsforge_color_delimiter">;</span></span></span></span><span class="ocsforge_color_delimiter">}</span></pre><pre class="ocsforge_color odocwiki_code" id="TYPEprotocol_entry"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">protocol_entry</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">protocol_entry</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="ocsforge_color_delimiter">{</span>
<span class="odocwiki_record"><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">p_name:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">p_aliases:</span> <span class="odocwiki_type">string array</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">p_proto:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span></span><span class="ocsforge_color_delimiter">}</span></pre><pre class="ocsforge_color odocwiki_code" id="TYPEservice_entry"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">service_entry</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">service_entry</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="ocsforge_color_delimiter">{</span>
<span class="odocwiki_record"><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">s_name:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">s_aliases:</span> <span class="odocwiki_type">string array</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">s_port:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">s_proto:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span></span><span class="ocsforge_color_delimiter">}</span></pre><pre class="ocsforge_color odocwiki_code" id="VALgethostname"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">gethostname</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> string <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.gethostname</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALgethostbyname"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">gethostbyname</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEhost_entry">host_entry</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.gethostbyname</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALgethostbyaddr"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">gethostbyaddr</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEinet_addr">inet_addr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEhost_entry">host_entry</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.gethostbyaddr</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALgetprotobyname"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">getprotobyname</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEprotocol_entry">protocol_entry</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.getprotobyname</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALgetprotobynumber"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">getprotobynumber</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">int <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEprotocol_entry">protocol_entry</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.getprotobynumber</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALgetservbyname"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">getservbyname</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">string <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEservice_entry">service_entry</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.getservbyname</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALgetservbyport"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">getservbyport</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">int <span class="ocsforge_color_delimiter">-&gt;</span> string <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEservice_entry">service_entry</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.getservbyport</span></p></div><pre class="ocsforge_color odocwiki_code" id="TYPEaddr_info"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">addr_info</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">addr_info</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="ocsforge_color_delimiter">{</span>
<span class="odocwiki_record"><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">ai_family:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEsocket_domain">socket_domain</a></span></span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">ai_socktype:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEsocket_type">socket_type</a></span></span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">ai_protocol:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">ai_addr:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEsockaddr">sockaddr</a></span></span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">ai_canonname:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span></span><span class="ocsforge_color_delimiter">}</span></pre><pre class="ocsforge_color odocwiki_code" id="TYPEgetaddrinfo_option"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">getaddrinfo_option</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">getaddrinfo_option</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">AI_FAMILY</span> <span class="ocsforge_color_keyword">of</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEsocket_domain">socket_domain</a></span></span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">AI_SOCKTYPE</span> <span class="ocsforge_color_keyword">of</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEsocket_type">socket_type</a></span></span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">AI_PROTOCOL</span> <span class="ocsforge_color_keyword">of</span> <span class="odocwiki_type">int</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">AI_NUMERICHOST</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">AI_CANONNAME</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">AI_PASSIVE</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALgetaddrinfo"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">getaddrinfo</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  string <span class="ocsforge_color_delimiter">-&gt;</span><br/>  string <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span><a href=".././api/Lwt_unix#TYPEgetaddrinfo_option">getaddrinfo_option</a></span> list <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEaddr_info">addr_info</a></span> list <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.getaddrinfo</span></p></div><pre class="ocsforge_color odocwiki_code" id="TYPEname_info"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">name_info</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">name_info</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="ocsforge_color_delimiter">{</span>
<span class="odocwiki_record"><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">ni_hostname:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_label">ni_service:</span> <span class="odocwiki_type">string</span><span class="ocsforge_color_delimiter">;</span></span></span></span><span class="ocsforge_color_delimiter">}</span></pre><pre class="ocsforge_color odocwiki_code" id="TYPEgetnameinfo_option"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">getnameinfo_option</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">getnameinfo_option</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">NI_NOFQDN</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">NI_NUMERICHOST</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">NI_NAMEREQD</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">NI_NUMERICSERV</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">NI_DGRAM</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALgetnameinfo"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">getnameinfo</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span><a href=".././api/Lwt_unix#TYPEsockaddr">sockaddr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span><a href=".././api/Lwt_unix#TYPEgetnameinfo_option">getnameinfo_option</a></span> list <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEname_info">name_info</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.getnameinfo</span></p></div><h6 id="6_Terminalinterface">Terminal interface <a class="backref" href="#6_Terminalinterface">&#182;</a></h6><pre class="ocsforge_color odocwiki_code" id="TYPEterminal_io"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">terminal_io</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">terminal_io</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="ocsforge_color_delimiter">{</span>
<span class="odocwiki_record"><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_ignbrk:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_brkint:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_ignpar:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_parmrk:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_inpck:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_istrip:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_inlcr:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_igncr:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_icrnl:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_ixon:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_ixoff:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_opost:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_obaud:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_ibaud:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_csize:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_cstopb:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_cread:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_parenb:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_parodd:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_hupcl:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_clocal:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_isig:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_icanon:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_noflsh:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_echo:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_echoe:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_echok:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_echonl:</span> <span class="odocwiki_type">bool</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_vintr:</span> <span class="odocwiki_type">char</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_vquit:</span> <span class="odocwiki_type">char</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_verase:</span> <span class="odocwiki_type">char</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_vkill:</span> <span class="odocwiki_type">char</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_veof:</span> <span class="odocwiki_type">char</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_veol:</span> <span class="odocwiki_type">char</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_vmin:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_vtime:</span> <span class="odocwiki_type">int</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_vstart:</span> <span class="odocwiki_type">char</span><span class="ocsforge_color_delimiter">;</span></span></span><span class="odocwiki_field"><span class="odocwiki_field_descr">  <span class="ocsforge_color_keyword">mutable </span><span class="ocsforge_color_label">c_vstop:</span> <span class="odocwiki_type">char</span><span class="ocsforge_color_delimiter">;</span></span></span></span><span class="ocsforge_color_delimiter">}</span></pre><pre class="ocsforge_color odocwiki_code" id="VALtcgetattr"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">tcgetattr</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEterminal_io">terminal_io</a></span> <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.tcgetattr</span></p></div><pre class="ocsforge_color odocwiki_code" id="TYPEsetattr_when"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">setattr_when</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">setattr_when</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">TCSANOW</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">TCSADRAIN</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">TCSAFLUSH</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALtcsetattr"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">tcsetattr</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span><a href=".././api/Lwt_unix#TYPEsetattr_when">setattr_when</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEterminal_io">terminal_io</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.tcsetattr</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALtcsendbreak"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">tcsendbreak</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> int <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.tcsendbreak</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALtcdrain"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">tcdrain</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.tcdrain</span></p></div><pre class="ocsforge_color odocwiki_code" id="TYPEflush_queue"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">flush_queue</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">flush_queue</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">TCIFLUSH</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">TCOFLUSH</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">TCIOFLUSH</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALtcflush"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">tcflush</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEflush_queue">flush_queue</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.tcflush</span></p></div><pre class="ocsforge_color odocwiki_code" id="TYPEflow_action"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">flow_action</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_type"><span class="ocsforge_color_uid">Unix</span><span class="ocsforge_color_delimiter">.</span><span class="ocsforge_color_lid">flow_action</span></span>  <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">TCOOFF</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">TCOON</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">TCIOFF</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">TCION</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALtcflow"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">tcflow</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEflow_action">flow_action</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wrapper for <span class="odocwiki_inlinecode">Unix.tcflow</span></p></div><h6 id="6_Lowlevelinteraction">Low-level interaction <a class="backref" href="#6_Lowlevelinteraction">&#182;</a></h6><pre class="ocsforge_color odocwiki_code" id="EXCEPTIONRetry"><span class="ocsforge_color_keyword">exception</span> <span class="odocwiki_name">Retry</span></pre><div class="odocwiki_info"><p>If an action raises <span><a href=".././api/Lwt_unix#EXCEPTIONRetry">Lwt_unix.Retry</a></span>, it will be requeued until the <strong>      file descriptor</strong> becomes readable/writable again.</p></div><pre class="ocsforge_color odocwiki_code" id="EXCEPTIONRetry_read"><span class="ocsforge_color_keyword">exception</span> <span class="odocwiki_name">Retry_read</span></pre><div class="odocwiki_info"><p>If an action raises <span><a href=".././api/Lwt_unix#EXCEPTIONRetry_read">Lwt_unix.Retry_read</a></span>, it will be requeued until the
      <strong>file descriptor</strong> becomes readable.</p></div><pre class="ocsforge_color odocwiki_code" id="EXCEPTIONRetry_write"><span class="ocsforge_color_keyword">exception</span> <span class="odocwiki_name">Retry_write</span></pre><div class="odocwiki_info"><p>If an action raises <span><a href=".././api/Lwt_unix#EXCEPTIONRetry_read">Lwt_unix.Retry_read</a></span>, it will be requeued until the
      <strong>file descriptor</strong> becomes writables.</p></div><pre class="ocsforge_color odocwiki_code" id="TYPEio_event"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_name">io_event</span> <span class="ocsforge_color_delimiter">=</span> <span class="odocwiki_variants"><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Read</span></span></span><span class="odocwiki_variant"><span class="odocwiki_variant_constr"><span class="ocsforge_color_keyword"> |</span> <span class="ocsforge_color_uid">Write</span></span></span></span></pre><pre class="ocsforge_color odocwiki_code" id="VALwrap_syscall"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">wrap_syscall</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEio_event">io_event</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_delimiter">(</span>unit <span class="ocsforge_color_delimiter">-&gt;</span> 'a<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">wrap_syscall set fd action</span> wrap an action on a <strong>file
descriptor</strong>. It tries to execture action, and if it can not be
performed immediately without blocking, it is registered for
latter.
</p><p>In the latter case, if the thread is canceled, <span class="odocwiki_inlinecode">action</span> is
removed from <span class="odocwiki_inlinecode">set</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALcheck_descriptor"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">check_descriptor</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">check_descriptor fd</span> raise an exception if <span class="odocwiki_inlinecode">fd</span> is not in the
state <span class="odocwiki_inlinecode">Open</span></p></div><pre class="ocsforge_color odocwiki_code" id="VALregister_action"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">register_action</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span><a href=".././api/Lwt_unix#TYPEio_event">io_event</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span><a href=".././api/Lwt_unix#TYPEfile_descr">file_descr</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_delimiter">(</span>unit <span class="ocsforge_color_delimiter">-&gt;</span> 'a<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">register_action set fd action</span> registers <span class="odocwiki_inlinecode">action</span> on <span class="odocwiki_inlinecode">fd</span>. When
<span class="odocwiki_inlinecode">fd</span> becomes <span class="odocwiki_inlinecode">readable</span>/<span class="odocwiki_inlinecode">writable</span> <span class="odocwiki_inlinecode">action</span> is called.
</p><p>Note:
</p><ul><li> you must call <span class="odocwiki_inlinecode">check_descriptor fd</span> before calling
<span class="odocwiki_inlinecode">register_action</span>
</li></ul><ul><li> you should prefer using <span><a href=".././api/Lwt_unix#VALwrap_syscall">Lwt_unix.wrap_syscall</a></span></li></ul></div><pre class="ocsforge_color odocwiki_code" id="TYPEjob"><span class="ocsforge_color_keyword">type</span> <span class="odocwiki_type">'a</span> <span class="odocwiki_name">job</span></pre><div class="odocwiki_info"><p>Type of job descriptions. A job description describe how to call
a C function and how to get its result. The C function may be
executed in another system thread.</p></div><pre class="ocsforge_color odocwiki_code" id="VALexecute_job"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">execute_job</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><br/>  <span class="ocsforge_color_label">?async_method:</span><span><a href=".././api/Lwt_unix#TYPEasync_method">async_method</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">job:</span>'a <span><a href=".././api/Lwt_unix#TYPEjob">job</a></span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">result:</span><span class="ocsforge_color_delimiter">(</span>'a <span><a href=".././api/Lwt_unix#TYPEjob">job</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> 'b<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span><br/>  <span class="ocsforge_color_label">free:</span><span class="ocsforge_color_delimiter">(</span>'a <span><a href=".././api/Lwt_unix#TYPEjob">job</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> unit<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> 'b <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>This is the old and deprecated way of running a job. Use
<span><a href=".././api/Lwt_unix#VALrun_job">Lwt_unix.run_job</a></span> in new code.</p></div><pre class="ocsforge_color odocwiki_code" id="VALrun_job"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">run_job</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_label">?async_method:</span><span><a href=".././api/Lwt_unix#TYPEasync_method">async_method</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt_unix#TYPEjob">job</a></span> <span class="ocsforge_color_delimiter">-&gt;</span> 'a <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">run_job ?async_method job</span> starts <span class="odocwiki_inlinecode">job</span> and wait for its
termination.
</p><p>The async method is choosen follow:
</p><ul><li> if the optional parameter <span class="odocwiki_inlinecode">async_method</span> is specified, it is
used,
</li><li> otherwise if the local key <span><a href=".././api/Lwt_unix#VALasync_method_key">Lwt_unix.async_method_key</a></span> is set in the
current thread, it is used,
</li><li> otherwise the default method (returned by
<span><a href=".././api/Lwt_unix#VALdefault_async_method">Lwt_unix.default_async_method</a></span>) is used.
</li></ul><p>If the method is <span class="odocwiki_inlinecode">Async_none</span> then the job is run synchronously
and may block the current system thread, thus blocking all Lwt
threads.
</p><p>If the method is <span class="odocwiki_inlinecode">Async_detach</span> then the job is run in another
system thread, unless the the maximum number of worker threads
has been reached (as given by <span><a href=".././api/Lwt_unix#VALpool_size">Lwt_unix.pool_size</a></span>).
</p><p>If the method is <span class="odocwiki_inlinecode">Async_switch</span> then the job is run
synchronously and if it blocks, execution will continue in
another system thread (unless the limit is reached).</p></div><pre class="ocsforge_color odocwiki_code" id="VALabort_jobs"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">abort_jobs</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">exn <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">abort_jobs exn</span> make all pending jobs to fail with exn. Note
that this does not abort the real job (i.e. the C function
executing it), just the lwt thread for it.</p></div><pre class="ocsforge_color odocwiki_code" id="VALcancel_jobs"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">cancel_jobs</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">cancel_jobs ()</span> is the same as <span class="odocwiki_inlinecode">abort_jobs Lwt.Canceled</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALwait_for_jobs"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">wait_for_jobs</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> unit <span><a href=".././api/Lwt#TYPEt">Lwt.t</a></span></span></pre><div class="odocwiki_info"><p>Wait for all pending jobs to terminate.</p></div><h6 id="6_Notifications">Notifications <a class="backref" href="#6_Notifications">&#182;</a></h6><p>Lwt internally use a pipe to send notification to the main
thread. The following functions allow to use this pipe.
</p><pre class="ocsforge_color odocwiki_code" id="VALmake_notification"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">make_notification</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_label">?once:</span>bool <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_delimiter">(</span>unit <span class="ocsforge_color_delimiter">-&gt;</span> unit<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> int</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">new_notifier ?once f</span> registers a new notifier. It returns the
id of the notifier. Each time a notification with this id is
received, <span class="odocwiki_inlinecode">f</span> is called.
</p><p>if <span class="odocwiki_inlinecode">once</span> is specified, then the notification is stopped after
the first time it is received. It defaults to <span class="odocwiki_inlinecode">false</span>.</p></div><pre class="ocsforge_color odocwiki_code" id="VALsend_notification"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">send_notification</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">int <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">send_notification id</span> sends a notification.
</p><p>This function is thread-safe.</p></div><pre class="ocsforge_color odocwiki_code" id="VALstop_notification"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">stop_notification</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">int <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Stop the given notification. Note that you should not reuse the
id after the notification has been stopped, the result is
unspecified if you do so.</p></div><pre class="ocsforge_color odocwiki_code" id="VALcall_notification"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">call_notification</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">int <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Call the handler associated to the given notification. Note that
if the notification was defined with <span class="odocwiki_inlinecode">once = true</span> it is removed.</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_notification"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_notification</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">int <span class="ocsforge_color_delimiter">-&gt;</span> <span class="ocsforge_color_delimiter">(</span>unit <span class="ocsforge_color_delimiter">-&gt;</span> unit<span class="ocsforge_color_delimiter">)</span> <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">set_notification id f</span> replace the function associated to the
notification by <span class="odocwiki_inlinecode">f</span>. It raises <span class="odocwiki_inlinecode">Not_found</span> if the given
notification is not found.</p></div><h6 id="6_Systemthreadspool">System threads pool <a class="backref" href="#6_Systemthreadspool">&#182;</a></h6><p>If the program is using the async method <span class="odocwiki_inlinecode">Async_detach</span> or
<span class="odocwiki_inlinecode">Async_switch</span>, Lwt will launch system threads to execute
blocking system calls asynchronously.
</p><pre class="ocsforge_color odocwiki_code" id="VALpool_size"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">pool_size</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> int</span></pre><div class="odocwiki_info"><p>Maximum number of system threads that can be started. If this
limit is reached, jobs will be executed synchronously.</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_pool_size"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_pool_size</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">int <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p>Change the size of the pool.</p></div><pre class="ocsforge_color odocwiki_code" id="VALthread_count"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">thread_count</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> int</span></pre><div class="odocwiki_info"><p>The number of system threads running (excluding this one).</p></div><pre class="ocsforge_color odocwiki_code" id="VALthread_waiting_count"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">thread_waiting_count</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> int</span></pre><div class="odocwiki_info"><p>The number threads waiting for a job.</p></div><h6 id="6_CPUs">CPUs <a class="backref" href="#6_CPUs">&#182;</a></h6><pre class="ocsforge_color odocwiki_code" id="VALget_cpu"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">get_cpu</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type">unit <span class="ocsforge_color_delimiter">-&gt;</span> int</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">get_cpu ()</span> returns the number of the CPU the current thread is
running on.</p></div><pre class="ocsforge_color odocwiki_code" id="VALget_affinity"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">get_affinity</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_label">?pid:</span>int <span class="ocsforge_color_delimiter">-&gt;</span> unit <span class="ocsforge_color_delimiter">-&gt;</span> int list</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">get_affinity ?pid ()</span> returns the list of CPUs the process with
pid <span class="odocwiki_inlinecode">pid</span> is allowed to run on. If <span class="odocwiki_inlinecode">pid</span> is not specified then
the affinity of the current process is returned.</p></div><pre class="ocsforge_color odocwiki_code" id="VALset_affinity"><span class="ocsforge_color_keyword">val</span> <span class="odocwiki_name">set_affinity</span> <span class="ocsforge_color_delimiter">:</span> <span class="odocwiki_type"><span class="ocsforge_color_label">?pid:</span>int <span class="ocsforge_color_delimiter">-&gt;</span> int list <span class="ocsforge_color_delimiter">-&gt;</span> unit</span></pre><div class="odocwiki_info"><p><span class="odocwiki_inlinecode">set_affinity ?pid cpus</span> sets the list of CPUs the given process
is allowed to run on.</p></div></article></div></div></body></html>
